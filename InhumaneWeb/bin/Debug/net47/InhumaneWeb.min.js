Bridge.assembly("InhumaneWeb",function($asm,globals){"use strict";Bridge.define("InhumaneCards.BaseGame",{inherits:[Microsoft.Xna.Framework.Game],fields:{sortMode:0,blendState:null,samplerState:null,depthStencilState:null,rasterizerState:null,effect:null,transformMatrix:null},ctors:{init:function(){this.sortMode=Microsoft.Xna.Framework.Graphics.SpriteSortMode.Deferred}},methods:{GetContent:function(){return this.Content},GetGraphicsDevice:function(){return this.GraphicsDevice},ChangeDrawSettings:function(sortMode,blendState,samplerState,depthStencilState,rasterizerState,effect,transformMatrix){sortMode===void 0&&(sortMode=0);blendState===void 0&&(blendState=null);samplerState===void 0&&(samplerState=null);depthStencilState===void 0&&(depthStencilState=null);rasterizerState===void 0&&(rasterizerState=null);effect===void 0&&(effect=null);transformMatrix===void 0&&(transformMatrix=null);this.sortMode=sortMode;this.blendState=blendState;this.samplerState=samplerState;this.depthStencilState=depthStencilState;this.rasterizerState=rasterizerState;this.effect=effect;this.transformMatrix=System.Nullable.lift1("$clone",transformMatrix)},ResetDrawSettings:function(){this.ChangeDrawSettings()},BatchBegin:function(){this.GetSpriteBatch().Begin(this.sortMode,this.blendState,this.samplerState,this.depthStencilState,this.rasterizerState,this.effect,System.Nullable.lift1("$clone",this.transformMatrix))},BatchEnd:function(){this.GetSpriteBatch().End()},OnExiting:function(sender,args){Microsoft.Xna.Framework.Game.prototype.OnExiting.call(this,sender,args);System.Environment.Exit(0)}}});Bridge.define("InhumaneCards.Classes.Button",{statics:{fields:{BACK_COLOR_HOVERED:null,BACK_COLOR:null,TEXT_COLOR:null,MARGIN:0,TEXT_SIZE:0,BOX_Y_OFFSET:0},ctors:{init:function(){this.BACK_COLOR_HOVERED=new Microsoft.Xna.Framework.Color;this.BACK_COLOR=new Microsoft.Xna.Framework.Color;this.TEXT_COLOR=new Microsoft.Xna.Framework.Color;this.BACK_COLOR_HOVERED=new Microsoft.Xna.Framework.Color.$ctor8(.24,.24,.24);this.BACK_COLOR=new Microsoft.Xna.Framework.Color.$ctor8(.19,.19,.19);this.TEXT_COLOR=new Microsoft.Xna.Framework.Color.$ctor8(.82,.82,.82);this.MARGIN=5;this.TEXT_SIZE=.8;this.BOX_Y_OFFSET=-6}}},fields:{hovered:!1,text:null,stringPos:null,stringOrigin:null,boxDestination:null,game:null,onClicked:null},ctors:{init:function(){this.stringPos=new Microsoft.Xna.Framework.Vector2;this.stringOrigin=new Microsoft.Xna.Framework.Vector2;this.boxDestination=new Microsoft.Xna.Framework.Rectangle;this.hovered=!1},$ctor1:function(text,posX,posY,game,onClicked){this.$initialize();this.text=text;this.game=game;this.stringPos=new Microsoft.Xna.Framework.Vector2.$ctor2(posX,posY-InhumaneCards.Classes.Button.BOX_Y_OFFSET|0);var stringMeasured=InhumaneCards.Classes.FontNum.DejaVuSans.F().MeasureString(text);this.stringOrigin=Microsoft.Xna.Framework.Vector2.op_Multiply$1(stringMeasured.$clone(),.5);this.boxDestination=new Microsoft.Xna.Framework.Rectangle.$ctor2(Bridge.Int.clip32(posX-this.stringOrigin.X*InhumaneCards.Classes.Button.TEXT_SIZE-6)-InhumaneCards.Classes.Button.MARGIN|0,Bridge.Int.clip32(posY-this.stringOrigin.Y*InhumaneCards.Classes.Button.TEXT_SIZE)-InhumaneCards.Classes.Button.MARGIN|0,Bridge.Int.clip32(stringMeasured.X*InhumaneCards.Classes.Button.TEXT_SIZE+10+12),Bridge.Int.clip32(stringMeasured.Y*InhumaneCards.Classes.Button.TEXT_SIZE+10));this.onClicked=onClicked},ctor:function(text,boxDestination,game,onClicked){this.$initialize();this.text=text;this.game=game;this.stringPos=Microsoft.Xna.Framework.Vector2.op_Subtraction(boxDestination.Center.ToVector2(),new Microsoft.Xna.Framework.Vector2.$ctor2(0,InhumaneCards.Classes.Button.BOX_Y_OFFSET));var stringMeasured=InhumaneCards.Classes.FontNum.DejaVuSans.F().MeasureString(text);this.stringOrigin=Microsoft.Xna.Framework.Vector2.op_Multiply$1(stringMeasured.$clone(),.5);this.boxDestination=boxDestination.$clone();this.onClicked=onClicked}},methods:{Update:function(){this.hovered=this.boxDestination.Contains(this.game.GetMousePosition());this.hovered&&this.game.GotMouseReleased()&&this.onClicked()},Draw:function(){this.game.Draw$1(InhumaneCards.Classes.TexNum.PIXEL.T(),this.boxDestination.$clone(),this.hovered?InhumaneCards.Classes.Button.BACK_COLOR_HOVERED.$clone():InhumaneCards.Classes.Button.BACK_COLOR.$clone());this.game.DrawString$2(InhumaneCards.Classes.FontNum.DejaVuSans.F(),this.text,this.stringPos.$clone(),InhumaneCards.Classes.Button.TEXT_COLOR.$clone(),0,this.stringOrigin.$clone(),InhumaneCards.Classes.Button.TEXT_SIZE,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0)}}});Bridge.define("InhumaneCards.Classes.DrawableCard",{statics:{fields:{BLACK:!1,WHITE:!1,MARGIN:0,LINE_HEIGHT:0,CARD_WIDTH:0,CARD_HEIGHT:0,TEXT_SIZE:0,BLACK_COLOR:null,WHITE_COLOR:null,TEXT_COLOR:null},ctors:{init:function(){this.BLACK_COLOR=new Microsoft.Xna.Framework.Color;this.WHITE_COLOR=new Microsoft.Xna.Framework.Color;this.TEXT_COLOR=new Microsoft.Xna.Framework.Color;this.BLACK=!1;this.WHITE=!0;this.MARGIN=5;this.LINE_HEIGHT=40;this.CARD_WIDTH=310;this.CARD_HEIGHT=300;this.TEXT_SIZE=.6125;this.BLACK_COLOR=new Microsoft.Xna.Framework.Color.$ctor8(.19,.19,.19);this.WHITE_COLOR=new Microsoft.Xna.Framework.Color.$ctor8(.36,.36,.36);this.TEXT_COLOR=new Microsoft.Xna.Framework.Color.$ctor8(.82,.82,.82)}}},fields:{lines:null,lineVectors:null,color:!1,posX:0,posY:0,destination:null,game:null},ctors:{init:function(){this.destination=new Microsoft.Xna.Framework.Rectangle},ctor:function(color,posX,posY,text,game){this.$initialize();this.color=color;this.posX=posX;this.posY=posY;this.destination=new Microsoft.Xna.Framework.Rectangle.$ctor2(posX,posY,InhumaneCards.Classes.DrawableCard.CARD_WIDTH,InhumaneCards.Classes.DrawableCard.CARD_HEIGHT);this.game=game;this.UpdateText(text)}},methods:{UpdateText:function(text){var i,word,secondHalf,currentLine,i1,i2;this.lines=new(System.Collections.Generic.List$1(System.String).ctor);this.lineVectors=new(System.Collections.Generic.List$1(Microsoft.Xna.Framework.Vector2).ctor);text==null&&(text="");text=System.Text.RegularExpressions.Regex.replace(text,"\\b-\\b","- µ");var wordSplit=System.String.split(text,[32].map(function(i){return String.fromCharCode(i)})),font=InhumaneCards.Classes.FontNum.DejaVuSans.F(),correctedWords=new(System.Collections.Generic.List$1(System.String).ctor);for(i=0;i<wordSplit.length;i=i+1|0)if(word=wordSplit[i],font.MeasureString((word||"")+" ").X*InhumaneCards.Classes.DrawableCard.TEXT_SIZE<300)correctedWords.add(word);else{for(secondHalf="";font.MeasureString((word||"")+" ").X*InhumaneCards.Classes.DrawableCard.TEXT_SIZE>=300;)secondHalf=String.fromCharCode(word.charCodeAt(word.length-1|0))+(secondHalf||""),word=word.substr(0,word.length-1|0);correctedWords.add(word);correctedWords.add(secondHalf)}for(currentLine="",i1=0;i1<correctedWords.Count;i1=i1+1|0)font.MeasureString((currentLine||"")+" "+(correctedWords.getItem(i1)||"")).X*InhumaneCards.Classes.DrawableCard.TEXT_SIZE<=300?currentLine=correctedWords.getItem(i1).charCodeAt(0)===181?(currentLine||"")+(System.String.remove(correctedWords.getItem(i1),0,1)||""):(currentLine||"")+(" "+(correctedWords.getItem(i1)||"")||""):(this.lines.add(currentLine.trim()),currentLine=correctedWords.getItem(i1),currentLine.charCodeAt(0)===181&&(currentLine=System.String.remove(currentLine,0,1)));for(this.lines.add(currentLine.trim()),i2=0;i2<this.lines.Count;i2=i2+1|0)this.lineVectors.add(new Microsoft.Xna.Framework.Vector2.$ctor2(this.posX+InhumaneCards.Classes.DrawableCard.MARGIN|0,(this.posY+InhumaneCards.Classes.DrawableCard.MARGIN|0)+Bridge.Int.mul(InhumaneCards.Classes.DrawableCard.LINE_HEIGHT,i2)|0))},Draw:function(){this.game.Draw$1(InhumaneCards.Classes.TexNum.PIXEL.T(),this.destination.$clone(),this.color===InhumaneCards.Classes.DrawableCard.BLACK?InhumaneCards.Classes.DrawableCard.BLACK_COLOR.$clone():InhumaneCards.Classes.DrawableCard.WHITE_COLOR.$clone());for(var i=0;i<this.lines.Count;i=i+1|0)this.game.DrawString$2(InhumaneCards.Classes.FontNum.DejaVuSans.F(),this.lines.getItem(i),this.lineVectors.getItem(i).$clone(),InhumaneCards.Classes.DrawableCard.TEXT_COLOR.$clone(),0,Microsoft.Xna.Framework.Vector2.Zero.$clone(),InhumaneCards.Classes.DrawableCard.TEXT_SIZE,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0)},Update:function(){}}});Bridge.define("InhumaneCards.Classes.DrawableText",{statics:{fields:{TEXT_COLOR:null},ctors:{init:function(){this.TEXT_COLOR=new Microsoft.Xna.Framework.Color;this.TEXT_COLOR=new Microsoft.Xna.Framework.Color.$ctor8(.82,.82,.82)}}},fields:{text:null,game:null,textSize:0,origin:null,position:null},ctors:{init:function(){this.origin=new Microsoft.Xna.Framework.Vector2;this.position=new Microsoft.Xna.Framework.Vector2;this.text="";this.textSize=1;this.origin=Microsoft.Xna.Framework.Vector2.Zero.$clone();this.position=Microsoft.Xna.Framework.Vector2.Zero.$clone()},ctor:function(game){this.$initialize();this.game=game},$ctor1:function(text,game){InhumaneCards.Classes.DrawableText.ctor.call(this,game);this.text=text}},methods:{Draw:function(){this.game.DrawString$2(InhumaneCards.Classes.FontNum.DejaVuSans.F(),this.text,this.position.$clone(),InhumaneCards.Classes.DrawableText.TEXT_COLOR.$clone(),0,this.origin.$clone(),this.textSize,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0)},MeasureOriginToCenter:function(){return this.origin=Microsoft.Xna.Framework.Vector2.op_Addition(Microsoft.Xna.Framework.Vector2.op_Multiply$1(InhumaneCards.Classes.FontNum.DejaVuSans.F().MeasureString(this.text),.5),new Microsoft.Xna.Framework.Vector2.$ctor2(0,-8*this.textSize)),this}}});Bridge.define("InhumaneCards.Classes.FontNum",{statics:{fields:{font_nums:null,DejaVuSans:null,count_nums:0},ctors:{init:function(){this.font_nums=new(System.Collections.Generic.List$1(InhumaneCards.Classes.FontNum).ctor);this.DejaVuSans=InhumaneCards.Classes.FontNum.a("font/DejaVuSans");this.count_nums=0}},methods:{GetFontNum:function(i){return System.Linq.Enumerable.from(InhumaneCards.Classes.FontNum.font_nums).elementAt(i)},Amount:function(){return InhumaneCards.Classes.FontNum.font_nums.Count},a:function(path){var num=new InhumaneCards.Classes.FontNum(InhumaneCards.Classes.FontNum.count_nums,path);return InhumaneCards.Classes.FontNum.count_nums=InhumaneCards.Classes.FontNum.count_nums+1|0,InhumaneCards.Classes.FontNum.font_nums.add(num),num}}},fields:{index:0,path:null},ctors:{ctor:function(index,path){this.$initialize();this.index=index;this.path=path}},methods:{GetId:function(){return this.index},GetPath:function(){return this.path},F:function(){return InhumaneCards.Classes.Fonts.GetFont$1(this.index)}}});Bridge.define("InhumaneCards.Classes.Fonts",{statics:{fields:{fonts:null},methods:{LoadFonts:function(content){var ms_before,i;for(System.Console.WriteLine("Loading Fonts..."),InhumaneCards.Classes.Fonts.fonts=System.Array.init(InhumaneCards.Classes.FontNum.Amount(),null,Microsoft.Xna.Framework.Graphics.SpriteFont),ms_before=Date.now(),i=0;i<InhumaneCards.Classes.FontNum.Amount();i=i+1|0)System.Console.WriteLine('Loading "'+(InhumaneCards.Classes.FontNum.GetFontNum(i).GetPath()||"")+'"'),InhumaneCards.Classes.Fonts.fonts[i]=content.Load(Microsoft.Xna.Framework.Graphics.SpriteFont,InhumaneCards.Classes.FontNum.GetFontNum(i).GetPath());System.Console.WriteLine("Loading Fonts done after "+System.Double.format((Date.now()-ms_before|0)/1e3)+" seconds")},GetFont$1:function(i){return InhumaneCards.Classes.Fonts.fonts[i]},GetFont:function(num){return InhumaneCards.Classes.Fonts.fonts[num.GetId()]},MeasureString:function(num,str){return InhumaneCards.Classes.Fonts.GetFont(num).MeasureString(str)},MeasureString$1:function(i,str){return InhumaneCards.Classes.Fonts.GetFont$1(i).MeasureString(str)}}}});Bridge.define("InhumaneCards.Classes.Menu",{fields:{game:null,hostButton:null,joinButton:null,changeNameButton:null,startGameButton:null,cantHostText:null,pointsNeededText:null,morePointsButton:null,lessPointsButton:null,blanksAvailableText:null,moreBlanksButton:null,lessBlanksButton:null,usernameText:null,waitingForHostText:null},ctors:{ctor:function(game){this.$initialize();this.game=game;this.SetupElements()}},methods:{SetupElements:function(){var $t;this.game.baseGame.CanHostGames()?(this.hostButton=new InhumaneCards.Classes.Button.$ctor1("Spiel hosten",480,720,this.game.baseGame,Bridge.fn.bind(this,function(){this.game.HostGame()})),this.joinButton=new InhumaneCards.Classes.Button.$ctor1("Spiel beitreten",1440,720,this.game.baseGame,Bridge.fn.bind(this,function(){this.game.baseGame.PerformTextInput("Ip Adresse","",Bridge.fn.bind(this,function(output){this.game.JoinGame(output)}))}))):(this.joinButton=new InhumaneCards.Classes.Button.$ctor1("Spiel beitreten",960,760,this.game.baseGame,Bridge.fn.bind(this,function(){this.game.baseGame.PerformTextInput("Ip Adresse","",Bridge.fn.bind(this,function(output){this.game.JoinGame(output)}))})),this.cantHostText=($t=new InhumaneCards.Classes.DrawableText.$ctor1("Aus dem Browser kann nicht gehostet werden",this.game.baseGame),$t.textSize=.8,$t.position=new Microsoft.Xna.Framework.Vector2.$ctor2(960,880),$t).MeasureOriginToCenter());this.changeNameButton=new InhumaneCards.Classes.Button.$ctor1("Name ändern",960,520,this.game.baseGame,Bridge.fn.bind(this,function(){this.game.baseGame.PerformTextInput("Neuer Name",this.game.username,Bridge.fn.bind(this,function(newName){this.game.ChangeUsername(newName);this.usernameText.text=newName;this.usernameText.MeasureOriginToCenter()}))}));this.startGameButton=new InhumaneCards.Classes.Button.$ctor1("Spiel starten",960,800,this.game.baseGame,Bridge.fn.bind(this,function(){this.game.HostStartGame()}));this.usernameText=($t=new InhumaneCards.Classes.DrawableText.$ctor1(this.game.username,this.game.baseGame),$t.textSize=.8,$t.position=new Microsoft.Xna.Framework.Vector2.$ctor2(960,600),$t).MeasureOriginToCenter();this.waitingForHostText=($t=new InhumaneCards.Classes.DrawableText.$ctor1("Warten auf Host",this.game.baseGame),$t.textSize=.8,$t.position=new Microsoft.Xna.Framework.Vector2.$ctor2(960,800),$t).MeasureOriginToCenter();this.morePointsButton=new InhumaneCards.Classes.Button.$ctor1("   ++   ",960,196,this.game.baseGame,Bridge.fn.bind(this,function(){this.game.MoreWinningPoints();this.pointsNeededText.text="Punkte benötigt zum Sieg: "+this.game.GetWinningPoints();this.pointsNeededText.MeasureOriginToCenter()}));this.pointsNeededText=($t=new InhumaneCards.Classes.DrawableText.$ctor1("Punkte benötigt zum Sieg: "+this.game.GetWinningPoints(),this.game.baseGame),$t.textSize=.8,$t.position=new Microsoft.Xna.Framework.Vector2.$ctor2(960,256),$t).MeasureOriginToCenter();this.lessPointsButton=new InhumaneCards.Classes.Button.$ctor1("   --   ",960,316,this.game.baseGame,Bridge.fn.bind(this,function(){this.game.LessWinningPoints();this.pointsNeededText.text="Punkte benötigt zum Sieg: "+this.game.GetWinningPoints();this.pointsNeededText.MeasureOriginToCenter()}));this.moreBlanksButton=new InhumaneCards.Classes.Button.$ctor1("   ++   ",960,496,this.game.baseGame,Bridge.fn.bind(this,function(){this.game.MoreBlankCards();this.blanksAvailableText.text="Anzahl beschreibbarer Karten: "+this.game.GetBlankCardCount();this.blanksAvailableText.MeasureOriginToCenter()}));this.blanksAvailableText=($t=new InhumaneCards.Classes.DrawableText.$ctor1("Anzahl beschreibbarer Karten: "+this.game.GetBlankCardCount(),this.game.baseGame),$t.textSize=.8,$t.position=new Microsoft.Xna.Framework.Vector2.$ctor2(960,556),$t).MeasureOriginToCenter();this.lessBlanksButton=new InhumaneCards.Classes.Button.$ctor1("   --   ",960,616,this.game.baseGame,Bridge.fn.bind(this,function(){this.game.LessBlankCards();this.blanksAvailableText.text="Anzahl beschreibbarer Karten: "+this.game.GetBlankCardCount();this.blanksAvailableText.MeasureOriginToCenter()}))},Update:function(){this.game.networkingStarted?this.game.hostsGame&&(this.startGameButton.Update(),this.morePointsButton.Update(),this.lessPointsButton.Update(),this.moreBlanksButton.Update(),this.lessBlanksButton.Update()):(this.game.baseGame.CanHostGames()&&this.hostButton.Update(),this.joinButton.Update(),this.changeNameButton.Update())},Draw:function(){if(this.game.networkingStarted){this.game.hostsGame?(this.startGameButton.Draw(),this.morePointsButton.Draw(),this.pointsNeededText.Draw(),this.lessPointsButton.Draw(),this.moreBlanksButton.Draw(),this.blanksAvailableText.Draw(),this.lessBlanksButton.Draw()):this.waitingForHostText.Draw();this.game.baseGame.DrawString$2(InhumaneCards.Classes.FontNum.DejaVuSans.F(),"Spieler: "+this.game.GetPlayerCount(),new Microsoft.Xna.Framework.Vector2.$ctor2(30,30),Microsoft.Xna.Framework.Color.White.$clone(),0,Microsoft.Xna.Framework.Vector2.Zero.$clone(),.8,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0);for(var b=0;b<this.game.GetPlayerCount();b=b+1&255)this.game.baseGame.DrawString$2(InhumaneCards.Classes.FontNum.DejaVuSans.F(),"• "+(this.game.GetPlayer(b)||""),new Microsoft.Xna.Framework.Vector2.$ctor2(30,80+Bridge.Int.mul(b,50)|0),Microsoft.Xna.Framework.Color.White.$clone(),0,Microsoft.Xna.Framework.Vector2.Zero.$clone(),.8,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0)}else this.game.baseGame.CanHostGames()?this.hostButton.Draw():this.cantHostText.Draw(),this.joinButton.Draw(),this.changeNameButton.Draw(),this.usernameText.Draw()}}});Bridge.define("InhumaneCards.Classes.Networking.NetworkingData",{statics:{fields:{serializer:null,ns:null,settings:null},ctors:{init:function(){var $t;this.serializer=new System.Xml.Serialization.XmlSerializer(InhumaneCards.Classes.Networking.NetworkingData);this.ns=new System.Xml.Serialization.XmlSerializerNamespaces(System.Array.init([System.Xml.Serialization.XmlQualifiedName.Empty],System.Object));this.settings=($t=new System.Xml.Serialization.XmlWriterSettings,$t.Indent=!1,$t.OmitXmlDeclaration=!0,$t)}},methods:{FromBytes:function(array){var xml=System.Text.Encoding.UTF8.GetString(array),stringReader;xml=System.String.replaceAll(xml,"&&&",'xmlns:p1="http://www.w3.org/2001/XMLSchema-instance"');xml=System.String.replaceAll(xml,"&&","p1:type=");stringReader=new System.IO.StringReader(xml);try{return Bridge.cast(InhumaneCards.Classes.Networking.NetworkingData.serializer.Deserialize(stringReader),InhumaneCards.Classes.Networking.NetworkingData)}finally{Bridge.hasValue(stringReader)&&stringReader.System$IDisposable$Dispose()}}}},ctors:{ctor:function(){this.$initialize()}},methods:{ToByteArray:function(){var stringWriter=new System.IO.StringWriter.ctor,xmlWriter,xml;try{xmlWriter=System.Xml.Serialization.XmlWriter.Create(stringWriter,InhumaneCards.Classes.Networking.NetworkingData.settings);try{return InhumaneCards.Classes.Networking.NetworkingData.serializer.Serialize(xmlWriter,this,InhumaneCards.Classes.Networking.NetworkingData.ns),xml=stringWriter.toString(),System.Console.WriteLine(xml),xml=System.String.replaceAll(xml,'xmlns:p1="http://www.w3.org/2001/XMLSchema-instance"',"&&&"),xml=System.String.replaceAll(xml,"p1:type=","&&"),System.Text.Encoding.UTF8.GetBytes$2(xml)}finally{Bridge.hasValue(xmlWriter)&&xmlWriter.System$IDisposable$Dispose()}}finally{Bridge.hasValue(stringWriter)&&stringWriter.System$IDisposable$Dispose()}}}});Bridge.define("InhumaneCards.Classes.Networking.ClientConnection",{fields:{client:null,webClient:null,stream:null,check_thread:null,webSocket:!1},ctors:{init:function(){this.webSocket=!1},$ctor1:function(client,id,onDataReceived){this.$initialize();client.ReceiveTimeout=5e3;client.SendTimeout=5e3;this.client=client;this.stream=client.GetStream();var id_arr=System.Array.init(new Uint8Array(1),System.Byte);id_arr[0]=id;this.stream.Write(id_arr,0,1);this.check_thread=new InhumaneCards.Thread(Bridge.fn.bind(this,function(){var $step=0,$task1,$jumpFromFinally,$returnValue,data,$async_e,$async_e1,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([1,2,3,4,5,6],$step);switch($step){case 1:if(1){$step=2;continue}$step=4;continue;case 2:data=System.Array.init(new Uint8Array(2048),System.Byte);$task1=this.stream.ReadAsync(data,0,2048);$step=3;$task1.continueWith($asyncBody,!0);return;case 3:$task1.getAwaitedResult();onDataReceived(InhumaneCards.Classes.Networking.NetworkingData.FromBytes(data),id);$step=1;continue;case 4:$step=6;continue;case 5:$async_e=null;$step=6;continue;case 6:return;default:return}}}catch($async_e1){if($async_e=System.Exception.create($async_e1),$step>=1&&$step<=4){$step=5;$asyncBody();return}throw $async_e;}},arguments);$asyncBody()}));this.check_thread.Start()},ctor:function(client,id,onDataReceived){this.$initialize();this.webSocket=!0;this.webClient=client;var id_arr=System.Array.init(new Uint8Array(1),System.Byte);id_arr[0]=id;this.webClient.Write(id_arr);this.check_thread=new InhumaneCards.Thread(Bridge.fn.bind(this,function(){var $step=0,$task1,$taskResult1,$jumpFromFinally,$returnValue,data,$async_e,$async_e1,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([1,2,3,4,5,6],$step);switch($step){case 1:if(1){$step=2;continue}$step=4;continue;case 2:$task1=this.webClient.ReadAsync(2048);$step=3;$task1.continueWith($asyncBody,!0);return;case 3:$taskResult1=$task1.getAwaitedResult();data=$taskResult1;onDataReceived(InhumaneCards.Classes.Networking.NetworkingData.FromBytes(data),id);$step=1;continue;case 4:$step=6;continue;case 5:$async_e=null;$step=6;continue;case 6:return;default:return}}}catch($async_e1){if($async_e=System.Exception.create($async_e1),$step>=1&&$step<=4){$step=5;$asyncBody();return}throw $async_e;}},arguments);$asyncBody()}));this.check_thread.Start()}},methods:{SendData:function(data){var byteData=data.ToByteArray();this.webSocket?this.webClient.Write(byteData):this.stream.Write(byteData,0,byteData.length)},StopConnection:function(){try{this.check_thread=null;this.webSocket?this.webClient.Close():(this.client.Close(),this.stream.Close());this.client=null;this.stream=null}catch($e1){$e1=System.Exception.create($e1)}}}});Bridge.define("InhumaneCards.Classes.Networking.GameClient",{fields:{socket:null,connected:!1,stream:null,check_thread:null,onDataReceived:null,last_received_data:null},ctors:{init:function(){this.connected=!1;this.onDataReceived=function(_){};this.last_received_data=null},ctor:function(){this.$initialize()}},methods:{SetDataReceiver:function(onDataReceived){this.onDataReceived=onDataReceived},Connect:function(address){var $step=0,$task1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,id_arr,id,e,$async_e,$async_e1,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4],$step);switch($step){case 0:this.socket=new System.Net.Sockets.TcpClient;$step=1;continue;case 1:this.socket.ReceiveTimeout=5e3;this.socket.SendTimeout=5e3;this.socket.Connect(address,7674);this.stream=this.socket.GetStream();id_arr=System.Array.init(new Uint8Array(1),System.Byte);$task1=this.stream.ReadAsync(id_arr,0,1);$step=2;$task1.continueWith($asyncBody);return;case 2:$task1.getAwaitedResult();id=id_arr[0];this.check_thread=new System.Threading.Tasks.Task(Bridge.fn.bind(this,function(){var $step=0,$task1,$jumpFromFinally,$returnValue,data,networkingData,$async_e,$async_e1,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([1,2,3,4,5,6],$step);switch($step){case 1:if(1){$step=2;continue}$step=4;continue;case 2:data=System.Array.init(new Uint8Array(2048),System.Byte);$task1=this.stream.ReadAsync(data,0,2048);$step=3;$task1.continueWith($asyncBody,!0);return;case 3:$task1.getAwaitedResult();networkingData=InhumaneCards.Classes.Networking.NetworkingData.FromBytes(data);this.onDataReceived(networkingData);this.last_received_data=networkingData;$step=1;continue;case 4:$step=6;continue;case 5:$async_e=null;$step=6;continue;case 6:return;default:return}}}catch($async_e1){if($async_e=System.Exception.create($async_e1),$step>=1&&$step<=4){$step=5;$asyncBody();return}throw $async_e;}},arguments);$asyncBody()}));this.check_thread.start();this.connected=!0;$tcs.setResult(id);return;case 3:System.Console.WriteLine(e.Message);System.Console.WriteLine(e.StackTrace);$tcs.setResult(0);return;$async_e=null;$step=4;continue;case 4:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){if($async_e=System.Exception.create($async_e1),$step>=1&&$step<=2){e=$async_e;$step=3;$asyncBody();return}$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},StopClient:function(){try{this.onDataReceived=function(_){};this.last_received_data=null;this.connected=!1;this.stream=null;this.check_thread=null;this.socket.Close();this.socket=null}catch($e1){$e1=System.Exception.create($e1)}},LastReceivedData:function(){return this.last_received_data},SendDataToServer:function(data){var byteData=data.ToByteArray();new System.Threading.Tasks.Task(Bridge.fn.bind(this,function(){this.stream.Write(byteData,0,byteData.length)})).start()},IsConnected:function(){return this.connected}}});Bridge.define("InhumaneCards.Classes.Networking.GameServer",{fields:{game:null,connections:null,socket:null,webSocket:null,running:!1,onDataReceived:null,acceptingClients:!1},ctors:{init:function(){this.connections=new(System.Collections.Generic.List$1(InhumaneCards.Classes.Networking.ClientConnection).ctor);this.running=!1;this.onDataReceived=function(_,__){};this.acceptingClients=!1},ctor:function(game){this.$initialize();this.game=game}},methods:{SetDataReceiver:function(onDataReceived){this.onDataReceived=onDataReceived},StartServer:function(){var ip=System.Net.NetworkInformation.IPAddress.Any;try{this.socket=new System.Net.Sockets.TcpListener(ip,7674);this.socket.Start();this.webSocket=new InhumaneCards.Classes.Networking.WebSocketServer(ip,7675);this.webSocket.Start()}catch(e){e=System.Exception.create(e);System.Console.WriteLine(e.Message);System.Console.WriteLine(e.StackTrace);return}new InhumaneCards.Thread(Bridge.fn.bind(this,function(){var client,clientId,connection;this.running=!0;this.acceptingClients=!0;try{while(this.acceptingClients)client=this.socket.AcceptTcpClient(),clientId=InhumaneCards.Utils.B(this.connections.Count+1|0),this.acceptingClients?(connection=new InhumaneCards.Classes.Networking.ClientConnection.$ctor1(client,clientId,Bridge.fn.cacheBind(this,this.DataReceivedWrapper)),this.connections.add(connection),this.game.OnClientConnected(clientId)):client.Close()}catch($e1){$e1=System.Exception.create($e1);this.game.BackToMainMenu()}})).Start();new InhumaneCards.Thread(Bridge.fn.bind(this,function(){var client,clientId,connection;try{while(this.acceptingClients)client=this.webSocket.AccecptWebSocketClient(),clientId=InhumaneCards.Utils.B(this.connections.Count+1|0),this.acceptingClients?(connection=new InhumaneCards.Classes.Networking.ClientConnection.ctor(client,clientId,Bridge.fn.cacheBind(this,this.DataReceivedWrapper)),this.connections.add(connection),this.game.OnClientConnected(clientId)):client.Close()}catch($e1){$e1=System.Exception.create($e1);this.game.BackToMainMenu()}})).Start()},StopServer:function(){try{this.StopAcceptingClients();for(var i=0;i<this.connections.Count;i=i+1&255)this.connections.getItem(i).StopConnection();this.running=!1;this.socket.Stop();this.webSocket.Stop();this.socket=null;this.onDataReceived=function(_,__){}}catch($e1){$e1=System.Exception.create($e1)}},DataReceivedWrapper:function(data,clientId){this.onDataReceived(data,clientId)},StopAcceptingClients:function(){this.acceptingClients=!1},MulticastData:function(data){for(var copy_i,i=0;i<this.connections.Count;i=i+1&255)copy_i={v:i},new System.Threading.Tasks.Task(function($me,copy_i){return Bridge.fn.bind($me,function(){this.connections.getItem(copy_i.v).SendData(data)})}(this,copy_i)).start()},MulticastDataExcept:function(data,excluded_ids){var id,copy_id;for(excluded_ids===void 0&&(excluded_ids=[]),id=1;id<(this.connections.Count+1|0);id=id+1&255)System.Array.contains(excluded_ids,id,System.Byte)||(copy_id={v:id},new System.Threading.Tasks.Task(function($me,copy_id){return Bridge.fn.bind($me,function(){this.connections.getItem(copy_id.v-1|0).SendData(data)})}(this,copy_id)).start())},GetConnection:function(id){return this.connections.getItem(id)},IsRunning:function(){return this.running},ConnectionCount:function(){return InhumaneCards.Utils.B(this.connections.Count)}}});Bridge.define("InhumaneCards.Classes.Networking.PlayerCards",{fields:{cardOne:null,cardTwo:null},ctors:{$ctor1:function(cardOne,cardTwo){this.$initialize();this.cardOne=cardOne;this.cardTwo=cardTwo},ctor:function(){this.$initialize()}}});Bridge.define("InhumaneCards.Classes.Networking.WebSocketClient",{statics:{methods:{GetDecodedData:function(buffer,length){var b=buffer[1],dataLength=0,totalLength=0,keyIndex=0,i,retBytes;if((b-128|0)<=125&&(dataLength=b-128|0,keyIndex=2,totalLength=dataLength+6|0),(b-128|0)==126&&(dataLength=System.BitConverter.toInt16(System.Array.init([buffer[3],buffer[2]],System.Byte),0),keyIndex=4,totalLength=dataLength+8|0),(b-128|0)==127&&(dataLength=System.Int64.clip32(System.BitConverter.toInt64(System.Array.init([buffer[9],buffer[8],buffer[7],buffer[6],buffer[5],buffer[4],buffer[3],buffer[2]],System.Byte),0)),keyIndex=10,totalLength=dataLength+14|0),totalLength>length)throw new System.Exception("The buffer length is small than the data length");var key=System.Array.init([buffer[keyIndex],buffer[keyIndex+1|0],buffer[keyIndex+2|0],buffer[keyIndex+3|0]],System.Byte),dataIndex=keyIndex+4|0,count=0;for(i=dataIndex;i<totalLength;i=i+1|0)buffer[i]=(buffer[i]^key[count%4])&255,count=count+1|0;return retBytes=System.Array.init(new Uint8Array(dataLength),System.Byte),System.Array.copy(buffer,dataIndex,retBytes,0,dataLength),retBytes},GetFrameFromBytes:function(bytesRaw){var response,frame=System.Array.init(new Uint8Array(10),System.Byte),indexStartRawData=-1,length=bytesRaw.length,i,reponseIdx;for(frame[0]=129,length<=125?(frame[1]=length&255,indexStartRawData=2):length>=126&&length<=65535?(frame[1]=126,frame[2]=length>>8&255,frame[3]=length&255,indexStartRawData=4):(frame[1]=127,frame[2]=length>>56&255,frame[3]=length>>48&255,frame[4]=length>>40&255,frame[5]=length>>32&255,frame[6]=length>>24&255,frame[7]=length>>16&255,frame[8]=length>>8&255,frame[9]=length&255,indexStartRawData=10),response=System.Array.init(new Uint8Array(indexStartRawData+length|0),System.Byte),reponseIdx=0,i=0;i<indexStartRawData;i=i+1|0)response[reponseIdx]=frame[i],reponseIdx=reponseIdx+1|0;for(i=0;i<length;i=i+1|0)response[reponseIdx]=bytesRaw[i],reponseIdx=reponseIdx+1|0;return response}}},fields:{tcpClient:null,stream:null},ctors:{ctor:function(tcpClient){this.$initialize();this.tcpClient=tcpClient;this.stream=tcpClient.GetStream()}},methods:{Read:function(size){var buffer=System.Array.init(new Uint8Array(size),System.Byte);return this.stream.Read(buffer,0,size),InhumaneCards.Classes.Networking.WebSocketClient.GetDecodedData(buffer,size)},ReadAsync:function(size){var $step=0,$task1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,buffer,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1],$step);switch($step){case 0:buffer=System.Array.init(new Uint8Array(size),System.Byte);$task1=this.stream.ReadAsync(buffer,0,size);$step=1;$task1.continueWith($asyncBody);return;case 1:$task1.getAwaitedResult();$tcs.setResult(InhumaneCards.Classes.Networking.WebSocketClient.GetDecodedData(buffer,size));return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},Write:function(bytes){var frame=InhumaneCards.Classes.Networking.WebSocketClient.GetFrameFromBytes(bytes);this.stream.Write(frame,0,frame.length)},Close:function(){this.stream.Close();this.tcpClient.Close()}}});Bridge.define("InhumaneCards.Classes.Networking.WebSocketServer",{fields:{tcpServer:null},ctors:{ctor:function(ip,port){this.$initialize();this.tcpServer=new System.Net.Sockets.TcpListener(ip,port)}},methods:{Start:function(){this.tcpServer.Start()},Stop:function(){this.tcpServer.Stop()},AccecptWebSocketClient:function(){var $step=0,$jumpFromFinally,tcpClient,stream,bytes,s,swk,swka,swkaSha1,swkaSha1Base64,response,webClient,$asyncBody=Bridge.fn.bind(this,function(){for(;;){$step=System.Array.min([0,1,2,3,4],$step);switch($step){case 0:case 1:for(tcpClient=this.tcpServer.AcceptTcpClient(),stream=tcpClient.GetStream();!stream.DataAvailable;);while(tcpClient.Available<3);if(bytes=System.Array.init(new Uint8Array(tcpClient.Available),System.Byte),stream.Read(bytes,0,tcpClient.Available),s=System.Text.Encoding.UTF8.GetString(bytes),System.Text.RegularExpressions.Regex.isMatch(s,"^GET",1)){$step=2;continue}else{$step=3;continue}case 2:return System.Console.WriteLine(System.String.format("=====Handshaking from client=====\n{0}",s)),swk=System.Text.RegularExpressions.Regex.match(s,"Sec-WebSocket-Key: (.*)").getGroups().get(1).getValue().trim(),swka=(swk||"")+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",swkaSha1=System.Security.Cryptography.SHA1.Create().ComputeHash(System.Text.Encoding.UTF8.GetBytes$2(swka)),swkaSha1Base64=System.Convert.toBase64String(swkaSha1,null,null,null),response=System.Text.Encoding.UTF8.GetBytes$2("HTTP/1.1 101 Switching Protocols\r\nConnection: Upgrade\r\nUpgrade: websocket\r\nSec-WebSocket-Accept: "+(swkaSha1Base64||"")+"\r\n\r\n"),stream.Write(response,0,response.length),webClient=new InhumaneCards.Classes.Networking.WebSocketClient(tcpClient);case 3:$step=1;continue;case 4:return;default:return}}},arguments);return $asyncBody()}}});Bridge.define("InhumaneCards.Classes.SndNum",{statics:{fields:{snd_nums:null,LASER0:null,LASER1:null,MUSIC:null,MENU_MUSIC:null,ENEMY_HIT:null,PLAYER_HIT:null,METEOR_HIT:null,DESTROY:null,ITEM_PICKED:null,MATERIAL_PICKED:null,count_nums:0},ctors:{init:function(){this.snd_nums=new(System.Collections.Generic.List$1(InhumaneCards.Classes.SndNum).ctor);this.LASER0=InhumaneCards.Classes.SndNum.a("sounds/laser");this.LASER1=InhumaneCards.Classes.SndNum.a("sounds/laser1");this.MUSIC=InhumaneCards.Classes.SndNum.a("sounds/8-bit-mayhem");this.MENU_MUSIC=InhumaneCards.Classes.SndNum.a("sounds/arcade-puzzler");this.ENEMY_HIT=InhumaneCards.Classes.SndNum.a("sounds/enemyhit");this.PLAYER_HIT=InhumaneCards.Classes.SndNum.a("sounds/playerhit");this.METEOR_HIT=InhumaneCards.Classes.SndNum.a("sounds/meteorhit");this.DESTROY=InhumaneCards.Classes.SndNum.a("sounds/destroy");this.ITEM_PICKED=InhumaneCards.Classes.SndNum.a("sounds/itemPicked");this.MATERIAL_PICKED=InhumaneCards.Classes.SndNum.a("sounds/materialsPickup");this.count_nums=0}},methods:{GetSndNum:function(i){return System.Linq.Enumerable.from(InhumaneCards.Classes.SndNum.snd_nums).elementAt(i)},Amount:function(){return InhumaneCards.Classes.SndNum.snd_nums.Count},a:function(path){var num=new InhumaneCards.Classes.SndNum(InhumaneCards.Classes.SndNum.count_nums,path);return InhumaneCards.Classes.SndNum.count_nums=InhumaneCards.Classes.SndNum.count_nums+1|0,InhumaneCards.Classes.SndNum.snd_nums.add(num),num}}},fields:{index:0,path:null},ctors:{ctor:function(index,path){this.$initialize();this.index=index;this.path=path}},methods:{GetId:function(){return this.index},GetPath:function(){return this.path}}});Bridge.define("InhumaneCards.Classes.Sounds",{statics:{fields:{sounds:null},methods:{LoadSounds:function(Content){var ms_before,i;for(System.Console.WriteLine("Loading Sounds..."),InhumaneCards.Classes.Sounds.sounds=System.Array.init(InhumaneCards.Classes.SndNum.Amount(),null,Microsoft.Xna.Framework.Audio.SoundEffect),ms_before=Date.now(),i=0;i<InhumaneCards.Classes.SndNum.Amount();i=i+1|0)System.Console.WriteLine('Loading "'+(InhumaneCards.Classes.SndNum.GetSndNum(i).GetPath()||"")+'"'),InhumaneCards.Classes.Sounds.sounds[i]=Content.Load(Microsoft.Xna.Framework.Audio.SoundEffect,InhumaneCards.Classes.SndNum.GetSndNum(i).GetPath());System.Console.WriteLine("Loading Sounds done after "+System.Double.format((Date.now()-ms_before|0)/1e3)+" seconds")},GetSound$1:function(i){return InhumaneCards.Classes.Sounds.sounds[i]},GetSound:function(num){return InhumaneCards.Classes.Sounds.sounds[num.GetId()]}}}});Bridge.define("InhumaneCards.Classes.TexNum",{statics:{fields:{tex_nums:null,PIXEL:null,CROSS:null,CZAR:null,count_nums:0},ctors:{init:function(){this.tex_nums=new(System.Collections.Generic.List$1(InhumaneCards.Classes.TexNum).ctor);this.PIXEL=InhumaneCards.Classes.TexNum.a("pixel");this.CROSS=InhumaneCards.Classes.TexNum.a("textures/Cross");this.CZAR=InhumaneCards.Classes.TexNum.a("textures/Czar");this.count_nums=0}},methods:{GetTexNum:function(i){return System.Linq.Enumerable.from(InhumaneCards.Classes.TexNum.tex_nums).elementAt(i)},Amount:function(){return InhumaneCards.Classes.TexNum.tex_nums.Count},a:function(path){var num=new InhumaneCards.Classes.TexNum(InhumaneCards.Classes.TexNum.count_nums,path);return InhumaneCards.Classes.TexNum.count_nums=InhumaneCards.Classes.TexNum.count_nums+1|0,InhumaneCards.Classes.TexNum.tex_nums.add(num),num}}},fields:{index:0,path:null},ctors:{ctor:function(index,path){this.$initialize();this.index=index;this.path=path}},methods:{GetId:function(){return this.index},GetPath:function(){return this.path},T:function(){return InhumaneCards.Classes.Textures.GetTexture$1(this.index)}}});Bridge.define("InhumaneCards.Classes.Textures",{statics:{fields:{textures:null},methods:{LoadTextures:function(content){var ms_before,i;for(System.Console.WriteLine("Loading Textures..."),InhumaneCards.Classes.Textures.textures=System.Array.init(InhumaneCards.Classes.TexNum.Amount(),null,Microsoft.Xna.Framework.Graphics.Texture2D),ms_before=Date.now(),i=0;i<InhumaneCards.Classes.TexNum.Amount();i=i+1|0)System.Console.WriteLine('Loading "'+(InhumaneCards.Classes.TexNum.GetTexNum(i).GetPath()||"")+'"'),InhumaneCards.Classes.Textures.textures[i]=content.Load(Microsoft.Xna.Framework.Graphics.Texture2D,InhumaneCards.Classes.TexNum.GetTexNum(i).GetPath());System.Console.WriteLine("Loading Textures done after "+System.Double.format((Date.now()-ms_before|0)/1e3)+" seconds")},GetTexture$1:function(i){return InhumaneCards.Classes.Textures.textures[i]},GetTexture:function(num){return InhumaneCards.Classes.Textures.textures[num.GetId()]}}}});Bridge.define("InhumaneCards.InhumaneGame",{statics:{fields:{TARGET_X:0,TARGET_Y:0,CLEAR_COLOR:null,BOX_OFFSET:0,BOX_WIDTH:0,BOX_COLOR:null,LINE_1_POS:null,LINE_2_POS:null,LINE_3_POS:null,HOR_LINE_SIZE:null,VER_LINE_SIZE:null},ctors:{init:function(){this.CLEAR_COLOR=new Microsoft.Xna.Framework.Color;this.BOX_COLOR=new Microsoft.Xna.Framework.Color;this.LINE_1_POS=new Microsoft.Xna.Framework.Vector2;this.LINE_2_POS=new Microsoft.Xna.Framework.Vector2;this.LINE_3_POS=new Microsoft.Xna.Framework.Vector2;this.HOR_LINE_SIZE=new Microsoft.Xna.Framework.Vector2;this.VER_LINE_SIZE=new Microsoft.Xna.Framework.Vector2;this.TARGET_X=1920;this.TARGET_Y=1080;this.CLEAR_COLOR=new Microsoft.Xna.Framework.Color.$ctor8(.08,.08,.08);this.BOX_OFFSET=20;this.BOX_WIDTH=5;this.BOX_COLOR=new Microsoft.Xna.Framework.Color.$ctor8(.82,.82,.82);this.LINE_1_POS=new Microsoft.Xna.Framework.Vector2.$ctor2(InhumaneCards.InhumaneGame.BOX_OFFSET,InhumaneCards.InhumaneGame.BOX_OFFSET);this.LINE_2_POS=new Microsoft.Xna.Framework.Vector2.$ctor2(InhumaneCards.InhumaneGame.BOX_OFFSET,1055);this.LINE_3_POS=new Microsoft.Xna.Framework.Vector2.$ctor2(1895,InhumaneCards.InhumaneGame.BOX_OFFSET);this.HOR_LINE_SIZE=new Microsoft.Xna.Framework.Vector2.$ctor2(1880,InhumaneCards.InhumaneGame.BOX_WIDTH);this.VER_LINE_SIZE=new Microsoft.Xna.Framework.Vector2.$ctor2(InhumaneCards.InhumaneGame.BOX_WIDTH,1040)}}},fields:{playerCount:0,networkingStarted:!1,hostsGame:!1,mainPartStarted:!1,winningPoints:0,blankCards:0,server:null,client:null,clientId:0,baseGame:null,partOfGame:null,menu:null,players:null,username:null,blackCards:null,blackCardTakesTwo:null,whiteCards:null},ctors:{init:function(){this.playerCount=1;this.networkingStarted=!1;this.hostsGame=!1;this.mainPartStarted=!1;this.winningPoints=5;this.blankCards=2;this.clientId=0;this.players=new(System.Collections.Generic.List$1(System.String).ctor);this.username="Benutzername"},ctor:function(baseGame){this.$initialize();this.baseGame=baseGame}},methods:{Init:function(){this.players.add(this.username)},LoadContent:function(){InhumaneCards.Classes.Textures.LoadTextures(this.baseGame.GetContent());InhumaneCards.Classes.Fonts.LoadFonts(this.baseGame.GetContent());this.LoadCards();this.menu=new InhumaneCards.Classes.Menu(this)},LoadCards:function(){var ms_before,stream,reader,blackCardsString,i,currentCard,markPosition,stream1,reader1,whiteCardsString;System.Console.WriteLine("Loading Cards...");ms_before=Date.now();stream=Microsoft.Xna.Framework.TitleContainer.OpenStream("Content/black_cards.txt");try{reader=new System.IO.StreamReader.$ctor1(stream);try{blackCardsString=reader.ReadToEnd();this.blackCards=System.String.split(blackCardsString,[10].map(function(i){return String.fromCharCode(i)}))}finally{Bridge.hasValue(reader)&&reader.System$IDisposable$Dispose()}}finally{Bridge.hasValue(stream)&&stream.System$IDisposable$Dispose()}for(this.blackCardTakesTwo=System.Array.init(this.blackCards.length,!1,System.Boolean),i=0;i<this.blackCards.length;i=i+1|0)currentCard=this.blackCards[i],markPosition=System.String.indexOf(currentCard,String.fromCharCode(94)),markPosition>0&&(this.blackCards[i]=currentCard.substr(0,markPosition).trim(),this.blackCardTakesTwo[i]=!0);stream1=Microsoft.Xna.Framework.TitleContainer.OpenStream("Content/white_cards.txt");try{reader1=new System.IO.StreamReader.$ctor1(stream1);try{whiteCardsString=reader1.ReadToEnd();this.whiteCards=System.String.split(whiteCardsString,[10].map(function(i){return String.fromCharCode(i)}))}finally{Bridge.hasValue(reader1)&&reader1.System$IDisposable$Dispose()}}finally{Bridge.hasValue(stream1)&&stream1.System$IDisposable$Dispose()}System.Console.WriteLine("Loading Cards done after "+System.Double.format((Date.now()-ms_before|0)/1e3)+" seconds")},OnClientConnected:function(clientId){for(this.playerCount=clientId=clientId+1&255;this.players.Count<this.playerCount;)this.players.add("")},GetPlayerCount:function(){return this.playerCount},GetPlayerId:function(){return this.hostsGame?0:this.clientId},GetPlayer:function(playerId){return this.players.getItem(playerId)},HostGame:function(){this.server=new InhumaneCards.Classes.Networking.GameServer(this);this.server.StartServer();this.networkingStarted=!0;this.hostsGame=!0;this.server.SetDataReceiver(Bridge.fn.cacheBind(this,this.LobbyHostDataReceiver));this.players.clear();this.players.add(this.username)},JoinGame:function(address){var $step=0,$task1,$taskResult1,$jumpFromFinally,$asyncBody=Bridge.fn.bind(this,function(){for(;;){$step=System.Array.min([0,1],$step);switch($step){case 0:this.networkingStarted=!0;this.hostsGame=!1;this.client=new InhumaneCards.Classes.Networking.GameClient;$task1=this.client.Connect(address);$step=1;$task1.continueWith($asyncBody,!0);return;case 1:$taskResult1=$task1.getAwaitedResult();this.clientId=$taskResult1;this.client.SetDataReceiver(Bridge.fn.cacheBind(this,this.LobbyClientDataReceiver));this.client.SendDataToServer(new InhumaneCards.Classes.Networking.JoinNetDat.$ctor1(this.username));return;default:return}}},arguments);$asyncBody()},LobbyHostDataReceiver:function(dat,clientId){if(Bridge.is(dat,InhumaneCards.Classes.Networking.JoinNetDat)){var data=Bridge.cast(dat,InhumaneCards.Classes.Networking.JoinNetDat);this.players.setItem(clientId,data.username);this.server.MulticastData(new InhumaneCards.Classes.Networking.PlayersNetDat.$ctor1(this.players.ToArray(),this.playerCount))}},LobbyClientDataReceiver:function(dat){var data,data1;Bridge.is(dat,InhumaneCards.Classes.Networking.PlayersNetDat)&&(data=Bridge.cast(dat,InhumaneCards.Classes.Networking.PlayersNetDat),this.players=new(System.Collections.Generic.List$1(System.String).$ctor1)(data.players),this.playerCount=data.playerCount);Bridge.is(dat,InhumaneCards.Classes.Networking.StartGameNetDat)&&(data1=Bridge.cast(dat,InhumaneCards.Classes.Networking.StartGameNetDat),this.blankCards=data1.maxBlankCards,this.ClientStartGame())},HostStartGame:function(){this.partOfGame=new InhumaneCards.MainPartOfGame(this).AsHost(this.server);this.mainPartStarted=!0;this.server.MulticastData(new InhumaneCards.Classes.Networking.StartGameNetDat.$ctor1(this.blankCards,this.players.ToArray(),this.playerCount))},ClientStartGame:function(){this.partOfGame=new InhumaneCards.MainPartOfGame(this).AsClient(this.client);this.mainPartStarted=!0},ChangeUsername:function(newName){this.networkingStarted||(this.username=newName,this.players.setItem(0,newName))},MoreWinningPoints:function(){this.winningPoints=this.winningPoints+1&255;this.winningPoints>100&&(this.winningPoints=100)},LessWinningPoints:function(){this.winningPoints=this.winningPoints-1&255;(this.winningPoints>253||this.winningPoints<2)&&(this.winningPoints=2)},MoreBlankCards:function(){this.blankCards=this.blankCards+1&255;this.blankCards>100&&(this.blankCards=100)},LessBlankCards:function(){this.blankCards=this.blankCards-1&255;(this.blankCards>253||this.blankCards<0)&&(this.blankCards=0)},GetBlankCardCount:function(){return this.blankCards},BackToMainMenu:function(){this.menu=new InhumaneCards.Classes.Menu(this);this.partOfGame=null;this.players=new(System.Collections.Generic.List$1(System.String).ctor);this.players.add(this.username);this.playerCount=1;this.networkingStarted=!1;this.hostsGame=!1;this.mainPartStarted=!1;this.server!=null&&this.server.StopServer();this.server=null;this.client!=null&&this.client.StopClient();this.client=null;this.clientId=0},GetWinningPoints:function(){return this.winningPoints},Update:function(gameTime){this.mainPartStarted?this.partOfGame.Update(gameTime):this.menu.Update()},Draw:function(gameTime){this.baseGame.GetGraphicsDevice().Clear(InhumaneCards.InhumaneGame.CLEAR_COLOR.$clone());this.baseGame.Draw$6(InhumaneCards.Classes.TexNum.PIXEL.T(),InhumaneCards.InhumaneGame.LINE_1_POS.$clone(),null,InhumaneCards.InhumaneGame.BOX_COLOR.$clone(),0,Microsoft.Xna.Framework.Vector2.Zero.$clone(),InhumaneCards.InhumaneGame.HOR_LINE_SIZE.$clone(),Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0);this.baseGame.Draw$6(InhumaneCards.Classes.TexNum.PIXEL.T(),InhumaneCards.InhumaneGame.LINE_2_POS.$clone(),null,InhumaneCards.InhumaneGame.BOX_COLOR.$clone(),0,Microsoft.Xna.Framework.Vector2.Zero.$clone(),InhumaneCards.InhumaneGame.HOR_LINE_SIZE.$clone(),Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0);this.baseGame.Draw$6(InhumaneCards.Classes.TexNum.PIXEL.T(),InhumaneCards.InhumaneGame.LINE_1_POS.$clone(),null,InhumaneCards.InhumaneGame.BOX_COLOR.$clone(),0,Microsoft.Xna.Framework.Vector2.Zero.$clone(),InhumaneCards.InhumaneGame.VER_LINE_SIZE.$clone(),Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0);this.baseGame.Draw$6(InhumaneCards.Classes.TexNum.PIXEL.T(),InhumaneCards.InhumaneGame.LINE_3_POS.$clone(),null,InhumaneCards.InhumaneGame.BOX_COLOR.$clone(),0,Microsoft.Xna.Framework.Vector2.Zero.$clone(),InhumaneCards.InhumaneGame.VER_LINE_SIZE.$clone(),Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0);this.mainPartStarted?this.partOfGame.Draw(gameTime):this.menu.Draw()}}});Bridge.define("InhumaneCards.MainPartOfGame",{statics:{fields:{BLACK_CARD_X:0,BLACK_CARD_Y:0,BLACK_MARGIN:0,BLACK_BOX_MARGIN:0,BLACK_BOX_COLOR:null,BLACK_CARD_BOX:null,BLACK_CARD_BOX_END:0,BLANK_CARD_BOX:null,PLUS_SIZE:0,PLUS_X_OFF:0,PLUS_Y_OFF:0,PLUS_BOX:null,PLUS_COLOR:null,PLUS_COLOR_HOVERED:null,WHITE_START_X:0,WHITE_START_Y:0,WHITE_MARGIN:0,LINE_1_POS:null,HOR_LINE_SIZE:null,LINE_2_POS:null,VER_LINE_SIZE:null,PAGE_BUTTON_HEIGHT:0,PAGE_BUTTON_MARGIN:0,SCOREBOARD_START_X:0,WHITE_CARD_COUNT:0},ctors:{init:function(){this.BLACK_BOX_COLOR=new Microsoft.Xna.Framework.Color;this.BLACK_CARD_BOX=new Microsoft.Xna.Framework.Rectangle;this.BLANK_CARD_BOX=new Microsoft.Xna.Framework.Rectangle;this.PLUS_BOX=new Microsoft.Xna.Framework.Rectangle;this.PLUS_COLOR=new Microsoft.Xna.Framework.Color;this.PLUS_COLOR_HOVERED=new Microsoft.Xna.Framework.Color;this.LINE_1_POS=new Microsoft.Xna.Framework.Vector2;this.HOR_LINE_SIZE=new Microsoft.Xna.Framework.Vector2;this.LINE_2_POS=new Microsoft.Xna.Framework.Vector2;this.VER_LINE_SIZE=new Microsoft.Xna.Framework.Vector2;this.BLACK_CARD_X=55;this.BLACK_CARD_Y=55;this.BLACK_MARGIN=10;this.BLACK_BOX_MARGIN=15;this.BLACK_BOX_COLOR=new Microsoft.Xna.Framework.Color.$ctor8(.36,.36,.36);this.BLACK_CARD_BOX=new Microsoft.Xna.Framework.Rectangle.$ctor2(40,40,660,330);this.BLACK_CARD_BOX_END=InhumaneCards.MainPartOfGame.BLACK_CARD_BOX.$clone().Location.X+InhumaneCards.MainPartOfGame.BLACK_CARD_BOX.$clone().Width|0;this.BLANK_CARD_BOX=new Microsoft.Xna.Framework.Rectangle.$ctor2(375,InhumaneCards.MainPartOfGame.BLACK_CARD_Y,InhumaneCards.Classes.DrawableCard.CARD_WIDTH,InhumaneCards.Classes.DrawableCard.CARD_HEIGHT);this.PLUS_SIZE=90;this.PLUS_X_OFF=110;this.PLUS_Y_OFF=105;this.PLUS_BOX=new Microsoft.Xna.Framework.Rectangle.$ctor2(InhumaneCards.MainPartOfGame.BLANK_CARD_BOX.$clone().X+InhumaneCards.MainPartOfGame.PLUS_X_OFF|0,InhumaneCards.MainPartOfGame.BLANK_CARD_BOX.$clone().Y+InhumaneCards.MainPartOfGame.PLUS_Y_OFF|0,InhumaneCards.MainPartOfGame.PLUS_SIZE,InhumaneCards.MainPartOfGame.PLUS_SIZE);this.PLUS_COLOR=new Microsoft.Xna.Framework.Color.$ctor8(.36,.36,.36);this.PLUS_COLOR_HOVERED=new Microsoft.Xna.Framework.Color.$ctor8(.42,.42,.42);this.WHITE_START_X=40;this.WHITE_START_Y=430;this.WHITE_MARGIN=10;this.LINE_1_POS=new Microsoft.Xna.Framework.Vector2.$ctor2(InhumaneCards.InhumaneGame.BOX_OFFSET,410);this.HOR_LINE_SIZE=new Microsoft.Xna.Framework.Vector2.$ctor2(1630,InhumaneCards.InhumaneGame.BOX_WIDTH);this.LINE_2_POS=new Microsoft.Xna.Framework.Vector2.$ctor2(InhumaneCards.MainPartOfGame.LINE_1_POS.$clone().X+InhumaneCards.MainPartOfGame.HOR_LINE_SIZE.$clone().X-InhumaneCards.InhumaneGame.BOX_WIDTH,InhumaneCards.MainPartOfGame.LINE_1_POS.$clone().Y);this.VER_LINE_SIZE=new Microsoft.Xna.Framework.Vector2.$ctor2(InhumaneCards.InhumaneGame.BOX_WIDTH,1060-InhumaneCards.MainPartOfGame.LINE_2_POS.$clone().Y);this.PAGE_BUTTON_HEIGHT=80;this.PAGE_BUTTON_MARGIN=10;this.SCOREBOARD_START_X=(InhumaneCards.MainPartOfGame.BLACK_CARD_BOX_END+60|0)+0|0;this.WHITE_CARD_COUNT=10}}},fields:{phase:0,tickNextPhaseShouldStart:System.Int64(0),votingPage:0,blackCardText:null,blackCardTakesTwo:!1,game:null,drawableBlackCard:null,blankCardButton:null,nextPageButton:null,lastPageButton:null,blankCardText:null,currentlyText:null,notAvailableText:null,allText:null,consumedText:null,cardsLeftText:null,waitingForOtherPlayers:null,roundWinnerText:null,roundWinnerBox:null,gameWinnerText:null,client:null,server:null,remote:!1,clientsReady:0,playerId:0,playerCount:0,winningPoints:0,maxBlankCards:0,czarId:0,score:null,playerCards:null,playersWhoPicked:0,playersPickedFlip:null,randVotingMap:null,revealedCards:null,roundWinnerId:0,gameWinnerId:0,tickGameWinnerGotDetermined:System.Int64(0),cardOne:null,cardTwo:null,blankCardsWritten:0,rng:null,whiteCards:null,cardsToDraw:null,ticks:System.Int64(0),scoreboardTexts:null,czarBox:null},ctors:{init:function(){this.roundWinnerBox=new Microsoft.Xna.Framework.Rectangle;this.czarBox=new Microsoft.Xna.Framework.Rectangle;this.tickNextPhaseShouldStart=System.Int64(-1);this.votingPage=0;this.blackCardTakesTwo=!1;this.clientsReady=0;this.playerId=0;this.playerCount=0;this.winningPoints=5;this.maxBlankCards=2;this.czarId=255;this.playersWhoPicked=0;this.roundWinnerId=255;this.gameWinnerId=255;this.tickGameWinnerGotDetermined=System.Int64(-1);this.blankCardsWritten=0;this.whiteCards=new(System.Collections.Generic.List$1(System.String).ctor);this.cardsToDraw=new(System.Collections.Generic.List$1(InhumaneCards.Classes.DrawableCard).ctor);this.ticks=System.Int64(0);this.scoreboardTexts=new(System.Collections.Generic.List$1(InhumaneCards.Classes.DrawableText).ctor)},ctor:function(game){var $t;this.$initialize();this.game=game;this.rng=new System.Random.$ctor1(Date.now());this.drawableBlackCard=new InhumaneCards.Classes.DrawableCard(InhumaneCards.Classes.DrawableCard.BLACK,InhumaneCards.MainPartOfGame.BLACK_CARD_X,InhumaneCards.MainPartOfGame.BLACK_CARD_Y,"Es wird auf alle Spieler gewartet",game.baseGame);this.blankCardButton=new InhumaneCards.Classes.Button.ctor("",InhumaneCards.MainPartOfGame.BLANK_CARD_BOX.$clone(),game.baseGame,Bridge.fn.bind(this,function(){this.phase===InhumaneCards.PhaseEnum.SELECTING&&!this.IsCzar()&&System.Array.getCount(this.whiteCards,System.String)<InhumaneCards.MainPartOfGame.WHITE_CARD_COUNT&&this.blankCardsWritten<this.maxBlankCards&&game.baseGame.PerformTextInput("Eigene Karte",this.GetRandomWhiteCard(),Bridge.fn.bind(this,function(cardText){var $t,cardBuilder,characters,c;if(this.phase===InhumaneCards.PhaseEnum.SELECTING&&!this.IsCzar()&&System.Array.getCount(this.whiteCards,System.String)<InhumaneCards.MainPartOfGame.WHITE_CARD_COUNT&&this.blankCardsWritten<this.maxBlankCards){cardText.length>90&&(cardText=cardText.substr(0,90));cardBuilder=new System.Text.StringBuilder;characters=InhumaneCards.Classes.FontNum.DejaVuSans.F().Characters;$t=Bridge.getEnumerator(cardText);try{while($t.moveNext())c=$t.Current,characters.contains(c)&&cardBuilder.append(String.fromCharCode(c))}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}cardText=cardBuilder.toString();System.Array.contains(this.whiteCards,cardText,System.String)||(System.Array.add(this.whiteCards,cardText,System.String),this.SetupWhiteCardsSelectingPhase(),this.blankCardsWritten=this.blankCardsWritten+1&255,this.cardsLeftText.text=(this.maxBlankCards-this.blankCardsWritten|0)+" übrig",this.cardsLeftText.MeasureOriginToCenter())}}))}));this.blankCardText=($t=new InhumaneCards.Classes.DrawableText.$ctor1("Karte schreiben",game.baseGame),$t.position=Microsoft.Xna.Framework.Vector2.op_Subtraction(InhumaneCards.MainPartOfGame.BLANK_CARD_BOX.$clone().Center.ToVector2(),new Microsoft.Xna.Framework.Vector2.$ctor2(0,92.30769)),$t.textSize=.75,$t).MeasureOriginToCenter();this.currentlyText=($t=new InhumaneCards.Classes.DrawableText.$ctor1("Momentan",game.baseGame),$t.position=Microsoft.Xna.Framework.Vector2.op_Addition(InhumaneCards.MainPartOfGame.BLANK_CARD_BOX.$clone().Center.ToVector2(),new Microsoft.Xna.Framework.Vector2.$ctor2(0,85.71429)),$t.textSize=.75,$t).MeasureOriginToCenter();this.notAvailableText=($t=new InhumaneCards.Classes.DrawableText.$ctor1("nicht möglich",game.baseGame),$t.position=Microsoft.Xna.Framework.Vector2.op_Addition(this.currentlyText.position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(0,40)),$t.textSize=this.currentlyText.textSize,$t).MeasureOriginToCenter();this.allText=($t=new InhumaneCards.Classes.DrawableText.$ctor1("Alle Karten",game.baseGame),$t.position=Microsoft.Xna.Framework.Vector2.op_Addition(InhumaneCards.MainPartOfGame.BLANK_CARD_BOX.$clone().Center.ToVector2(),new Microsoft.Xna.Framework.Vector2.$ctor2(0,85.71429)),$t.textSize=.75,$t).MeasureOriginToCenter();this.consumedText=($t=new InhumaneCards.Classes.DrawableText.$ctor1("verbraucht",game.baseGame),$t.position=Microsoft.Xna.Framework.Vector2.op_Addition(this.allText.position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(0,40)),$t.textSize=this.allText.textSize,$t).MeasureOriginToCenter();this.waitingForOtherPlayers=($t=new InhumaneCards.Classes.DrawableText.$ctor1("Auf andere Spieler warten",game.baseGame),$t.position=new Microsoft.Xna.Framework.Vector2.$ctor2(835,735),$t.textSize=1.25,$t).MeasureOriginToCenter();this.cardsLeftText=($t=new InhumaneCards.Classes.DrawableText.$ctor1((this.maxBlankCards-this.blankCardsWritten|0)+" übrig",game.baseGame),$t.position=Microsoft.Xna.Framework.Vector2.op_Addition(this.allText.position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(0,40)),$t.textSize=this.allText.textSize,$t).MeasureOriginToCenter();this.roundWinnerText=($t=new InhumaneCards.Classes.DrawableText.ctor(game.baseGame),$t.position=new Microsoft.Xna.Framework.Vector2.$ctor2(960,540),$t.textSize=1.25,$t).MeasureOriginToCenter();this.gameWinnerText=($t=new InhumaneCards.Classes.DrawableText.ctor(game.baseGame),$t.position=Microsoft.Xna.Framework.Vector2.op_Addition(new Microsoft.Xna.Framework.Vector2.$ctor2(InhumaneCards.MainPartOfGame.WHITE_START_X,InhumaneCards.MainPartOfGame.WHITE_START_Y),Microsoft.Xna.Framework.Vector2.op_Multiply$1(new Microsoft.Xna.Framework.Vector2.$ctor2(1590,610),.5)),$t.textSize=1.5,$t).MeasureOriginToCenter();this.MakeWinnerText("Benutzername");this.nextPageButton=new InhumaneCards.Classes.Button.ctor(">>",new Microsoft.Xna.Framework.Rectangle.$ctor2((Bridge.Int.clip32(InhumaneCards.MainPartOfGame.LINE_2_POS.$clone().X)+InhumaneCards.InhumaneGame.BOX_WIDTH|0)+InhumaneCards.MainPartOfGame.PAGE_BUTTON_MARGIN|0,650,(1895-(Bridge.Int.clip32(InhumaneCards.MainPartOfGame.LINE_2_POS.$clone().X)+InhumaneCards.InhumaneGame.BOX_WIDTH|0)|0)-20|0,InhumaneCards.MainPartOfGame.PAGE_BUTTON_HEIGHT),game.baseGame,Bridge.fn.bind(this,function(){this.IsCzar()&&(this.votingPage=this.votingPage+1&255,this.votingPage>=this.GetVotingPhasePages()&&(this.votingPage=InhumaneCards.Utils.B(this.GetVotingPhasePages()-1|0)),this.SetupWhiteCardsVotingPhase(this.votingPage,this.CheckForRevealed()),this.IsHost()?this.server.MulticastData(new InhumaneCards.Classes.Networking.OpenPageNetDat.$ctor1(this.votingPage)):this.client.SendDataToServer(new InhumaneCards.Classes.Networking.OpenPageNetDat.$ctor1(this.votingPage)))}));this.lastPageButton=new InhumaneCards.Classes.Button.ctor("<<",new Microsoft.Xna.Framework.Rectangle.$ctor2((Bridge.Int.clip32(InhumaneCards.MainPartOfGame.LINE_2_POS.$clone().X)+InhumaneCards.InhumaneGame.BOX_WIDTH|0)+InhumaneCards.MainPartOfGame.PAGE_BUTTON_MARGIN|0,740,(1895-(Bridge.Int.clip32(InhumaneCards.MainPartOfGame.LINE_2_POS.$clone().X)+InhumaneCards.InhumaneGame.BOX_WIDTH|0)|0)-20|0,InhumaneCards.MainPartOfGame.PAGE_BUTTON_HEIGHT),game.baseGame,Bridge.fn.bind(this,function(){this.IsCzar()&&(this.votingPage=this.votingPage-1&255,this.votingPage<0&&(this.votingPage=0),this.SetupWhiteCardsVotingPhase(this.votingPage,this.CheckForRevealed()),this.IsHost()?this.server.MulticastData(new InhumaneCards.Classes.Networking.OpenPageNetDat.$ctor1(this.votingPage)):this.client.SendDataToServer(new InhumaneCards.Classes.Networking.OpenPageNetDat.$ctor1(this.votingPage)))}));this.playerId=game.GetPlayerId();this.playerCount=game.GetPlayerCount();this.winningPoints=game.GetWinningPoints();this.maxBlankCards=game.GetBlankCardCount();this.score=System.Array.init(new Uint8Array(this.playerCount),System.Byte);this.playerCards=System.Array.init(this.playerCount,null,InhumaneCards.Classes.Networking.PlayerCards);this.playersPickedFlip=System.Array.init(this.playerCount,!1,System.Boolean);this.revealedCards=System.Array.init(new Int32Array(this.playerCount),System.Int32);this.phase=InhumaneCards.PhaseEnum.WAITING}},methods:{AsClient:function(client){return this.client=client,client.SetDataReceiver(Bridge.fn.cacheBind(this,this.ClientDataReceiver)),this.remote=!0,this},AsHost:function(server){return this.server=server,server.StopAcceptingClients(),server.SetDataReceiver(Bridge.fn.cacheBind(this,this.HostDataReceiver)),this.remote=!1,this},IsClient:function(){return this.remote},IsHost:function(){return!this.remote},ClientDataReceiver:function(dat){var $t,data,card,data1,data2,data3,data4,data5,data6;if(Bridge.is(dat,InhumaneCards.Classes.Networking.NewBlackCardNetDat)&&(data=Bridge.cast(dat,InhumaneCards.Classes.Networking.NewBlackCardNetDat),this.blackCardText=data.cardText,this.blackCardTakesTwo=data.takesTwo,this.drawableBlackCard.UpdateText(this.blackCardText),this.cardOne=null,this.cardTwo=null,this.phase===InhumaneCards.PhaseEnum.SELECTING)){$t=Bridge.getEnumerator(this.cardsToDraw,InhumaneCards.Classes.DrawableCard);try{while($t.moveNext())card=Bridge.cast($t.Current,InhumaneCards.Classes.SelectableWhiteCard),card.buttonsActive=!0,card.okayActive=!0}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}Bridge.is(dat,InhumaneCards.Classes.Networking.StartSelectingNetDat)&&(data1=Bridge.cast(dat,InhumaneCards.Classes.Networking.StartSelectingNetDat),this.czarId=data1.czarId,this.StartSelectingPhase());Bridge.is(dat,InhumaneCards.Classes.Networking.StartVotingPhaseNetDat)&&(data2=Bridge.cast(dat,InhumaneCards.Classes.Networking.StartVotingPhaseNetDat),this.playerCards=data2.playerCards,this.SetupRandVotingMap(data2.randSeed),this.StartVotingPhase());Bridge.is(dat,InhumaneCards.Classes.Networking.RevealCardNetDat)&&(data3=Bridge.cast(dat,InhumaneCards.Classes.Networking.RevealCardNetDat),this.revealedCards[data3.playerToReveal]=data3.revealFlag,this.CheckForRevealed()?this.SetupWhiteCardsVotingPhase(this.votingPage,!0):this.SetupWhiteCardsVotingPhase(this.votingPage));Bridge.is(dat,InhumaneCards.Classes.Networking.OpenPageNetDat)&&(data4=Bridge.cast(dat,InhumaneCards.Classes.Networking.OpenPageNetDat),this.phase===InhumaneCards.PhaseEnum.VOTING&&(this.votingPage=data4.page,this.SetupWhiteCardsVotingPhase(this.votingPage,this.CheckForRevealed())));Bridge.is(dat,InhumaneCards.Classes.Networking.RoundWinnerNetDat)&&(data5=Bridge.cast(dat,InhumaneCards.Classes.Networking.RoundWinnerNetDat),this.DetermineRoundWinner(data5.winnerId));Bridge.is(dat,InhumaneCards.Classes.Networking.GameWinnerNetDat)&&(data6=Bridge.cast(dat,InhumaneCards.Classes.Networking.GameWinnerNetDat),this.gameWinnerId=data6.winnerId,this.DetermineGameWinner())},HostDataReceiver:function(dat,clientId){var $t,card,data,playersCards,data1,data2,data3;if(Bridge.is(dat,InhumaneCards.Classes.Networking.ClientReadyNetDat)&&(this.clientsReady=this.clientsReady+1&255,this.clientsReady===(this.playerCount-1|0)&&this.StartSelectingPhase()),Bridge.is(dat,InhumaneCards.Classes.Networking.RequestNewBlackCardNetDat)&&clientId===this.czarId&&this.phase===InhumaneCards.PhaseEnum.SELECTING&&(this.ApplyRandomBlackCard(),this.drawableBlackCard.UpdateText(this.blackCardText),this.server.MulticastData(new InhumaneCards.Classes.Networking.NewBlackCardNetDat.$ctor1(this.blackCardText,this.blackCardTakesTwo)),this.cardOne=null,this.cardTwo=null,this.phase===InhumaneCards.PhaseEnum.SELECTING)){$t=Bridge.getEnumerator(this.cardsToDraw,InhumaneCards.Classes.DrawableCard);try{while($t.moveNext())card=Bridge.cast($t.Current,InhumaneCards.Classes.SelectableWhiteCard),card.buttonsActive=!0,card.okayActive=!0}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}Bridge.is(dat,InhumaneCards.Classes.Networking.ClientCardNetDat)&&(data=Bridge.cast(dat,InhumaneCards.Classes.Networking.ClientCardNetDat),this.playersPickedFlip[clientId]||(playersCards=new InhumaneCards.Classes.Networking.PlayerCards.$ctor1(data.cardOne,data.cardTwo),this.playerCards[clientId]=playersCards,this.playersPickedFlip[clientId]=!0,this.playersWhoPicked=this.playersWhoPicked+1&255,this.playersWhoPicked>=(this.playerCount-1|0)&&(this.tickNextPhaseShouldStart=this.ticks.add(System.Int64(30)))));Bridge.is(dat,InhumaneCards.Classes.Networking.ClientCardCancelNetDat)&&this.playersPickedFlip[clientId]&&(this.playersWhoPicked=this.playersWhoPicked-1&255,this.playersPickedFlip[clientId]=!1);Bridge.is(dat,InhumaneCards.Classes.Networking.RevealCardNetDat)&&(data1=Bridge.cast(dat,InhumaneCards.Classes.Networking.RevealCardNetDat),clientId===this.czarId&&(this.revealedCards[data1.playerToReveal]=data1.revealFlag,this.server.MulticastDataExcept(data1,[this.czarId]),this.CheckForRevealed()?this.SetupWhiteCardsVotingPhase(this.votingPage,!0):this.SetupWhiteCardsVotingPhase(this.votingPage)));Bridge.is(dat,InhumaneCards.Classes.Networking.OpenPageNetDat)&&(data2=Bridge.cast(dat,InhumaneCards.Classes.Networking.OpenPageNetDat),this.phase===InhumaneCards.PhaseEnum.VOTING&&this.czarId===clientId&&(this.votingPage=data2.page,this.SetupWhiteCardsVotingPhase(this.votingPage,this.CheckForRevealed()),this.server.MulticastDataExcept(new InhumaneCards.Classes.Networking.OpenPageNetDat.$ctor1(this.votingPage),[clientId])));Bridge.is(dat,InhumaneCards.Classes.Networking.RoundWinnerNetDat)&&(data3=Bridge.cast(dat,InhumaneCards.Classes.Networking.RoundWinnerNetDat),clientId===this.czarId&&(this.DetermineRoundWinner(data3.winnerId),this.server.MulticastDataExcept(data3,[clientId])))},IsCzar:function(){return this.playerId===this.czarId},StartSelectingPhase:function(){if(this.playerCards=System.Array.init(this.playerCount,null,InhumaneCards.Classes.Networking.PlayerCards),this.playersPickedFlip=System.Array.init(this.playerCount,!1,System.Boolean),this.playersWhoPicked=0,this.revealedCards=System.Array.init(new Int32Array(this.playerCount),System.Int32),this.cardOne=null,this.cardTwo=null,System.Array.clear(this.cardsToDraw,InhumaneCards.Classes.DrawableCard),this.IsHost()&&(this.czarId===255?this.czarId=InhumaneCards.Utils.B(this.rng.Next$1(this.playerCount)):(this.czarId=this.czarId+1&255,this.czarId===this.playerCount&&(this.czarId=0)),this.ApplyRandomBlackCard(),this.server.MulticastData(new InhumaneCards.Classes.Networking.StartSelectingNetDat.$ctor1(this.czarId,this.blackCardText,this.blackCardTakesTwo))),this.UpdateScoreboard(),this.drawableBlackCard=this.IsHost()?new InhumaneCards.Classes.CrossableCard(InhumaneCards.Classes.DrawableCard.BLACK,InhumaneCards.MainPartOfGame.BLACK_CARD_X,InhumaneCards.MainPartOfGame.BLACK_CARD_Y,this.blackCardText,this.game.baseGame).WithCrossListener(Bridge.fn.bind(this,function(){this.IsHost()?(this.ApplyRandomBlackCard(),this.drawableBlackCard.UpdateText(this.blackCardText),this.server.MulticastData(new InhumaneCards.Classes.Networking.NewBlackCardNetDat.$ctor1(this.blackCardText,this.blackCardTakesTwo))):this.client.SendDataToServer(new InhumaneCards.Classes.Networking.RequestNewBlackCardNetDat)})):new InhumaneCards.Classes.DrawableCard(InhumaneCards.Classes.DrawableCard.BLACK,InhumaneCards.MainPartOfGame.BLACK_CARD_X,InhumaneCards.MainPartOfGame.BLACK_CARD_Y,this.blackCardText,this.game.baseGame),!this.IsCzar()||!(this.playerCount>1)){while(System.Array.getCount(this.whiteCards,System.String)<InhumaneCards.MainPartOfGame.WHITE_CARD_COUNT){var cardText=this.GetRandomWhiteCard();System.Array.contains(this.whiteCards,cardText,System.String)||System.Array.add(this.whiteCards,cardText,System.String)}this.SetupWhiteCardsSelectingPhase()}this.phase=InhumaneCards.PhaseEnum.SELECTING},SetupWhiteCardsSelectingPhase:function(){var hideUnchecked,i,cardText,whiteCard;for(System.Array.clear(this.cardsToDraw,InhumaneCards.Classes.DrawableCard),hideUnchecked=!1,hideUnchecked=!this.blackCardTakesTwo&&this.cardOne!=null||this.blackCardTakesTwo&&this.cardOne!=null&&this.cardTwo!=null,i=0;i<System.Array.getCount(this.whiteCards,System.String);i=i+1|0)cardText={v:System.Array.getItem(this.whiteCards,i,System.String)},whiteCard={v:new InhumaneCards.Classes.SelectableWhiteCard(InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.div(i,2)|0,320)|0,InhumaneCards.MainPartOfGame.WHITE_START_Y+Bridge.Int.mul(i%2,310)|0,cardText.v,this.game.baseGame)},whiteCard.v.WithCrossListener(function($me,whiteCard,cardText){return Bridge.fn.bind($me,function(){whiteCard.v.okayActive&&System.Array.getCount(this.whiteCards,System.String)>2&&(System.Array.remove(this.whiteCards,cardText.v,System.String),this.SetupWhiteCardsSelectingPhase())})}(this,whiteCard,cardText)),whiteCard.v.WithOkayListener(function($me,cardText){return Bridge.fn.bind($me,function(){var $t,$t1,card,card1;if(this.blackCardTakesTwo){if(this.cardOne==null?this.cardOne=cardText.v:this.cardTwo=cardText.v,this.cardOne!=null&&this.cardTwo!=null){$t=Bridge.getEnumerator(this.cardsToDraw,InhumaneCards.Classes.DrawableCard);try{while($t.moveNext())card=Bridge.cast($t.Current,InhumaneCards.Classes.SelectableWhiteCard),card.okayActive&&(card.buttonsActive=!1)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}this.IsClient()?this.client.SendDataToServer(new InhumaneCards.Classes.Networking.ClientCardNetDat.$ctor2(this.cardOne,this.cardTwo)):this.HostDataReceiver(new InhumaneCards.Classes.Networking.ClientCardNetDat.$ctor2(this.cardOne,this.cardTwo),0)}}else{this.cardOne=cardText.v;$t1=Bridge.getEnumerator(this.cardsToDraw,InhumaneCards.Classes.DrawableCard);try{while($t1.moveNext())card1=Bridge.cast($t1.Current,InhumaneCards.Classes.SelectableWhiteCard),card1.okayActive&&(card1.buttonsActive=!1)}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}this.IsClient()?this.client.SendDataToServer(new InhumaneCards.Classes.Networking.ClientCardNetDat.$ctor1(this.cardOne)):this.HostDataReceiver(new InhumaneCards.Classes.Networking.ClientCardNetDat.$ctor1(this.cardOne),0)}})}(this,cardText)),whiteCard.v.WithCancelListener(function($me,cardText){return Bridge.fn.bind($me,function(){var $t,$t1,card,card1;if(this.blackCardTakesTwo){Bridge.referenceEquals(this.cardOne,cardText.v)?(this.cardOne=this.cardTwo,this.cardTwo=null):this.cardTwo=null;$t=Bridge.getEnumerator(this.cardsToDraw,InhumaneCards.Classes.DrawableCard);try{while($t.moveNext())card=Bridge.cast($t.Current,InhumaneCards.Classes.SelectableWhiteCard),card.buttonsActive=!0}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}this.IsClient()?this.client.SendDataToServer(new InhumaneCards.Classes.Networking.ClientCardCancelNetDat):this.HostDataReceiver(new InhumaneCards.Classes.Networking.ClientCardCancelNetDat,0)}else{this.cardOne=null;$t1=Bridge.getEnumerator(this.cardsToDraw,InhumaneCards.Classes.DrawableCard);try{while($t1.moveNext())card1=Bridge.cast($t1.Current,InhumaneCards.Classes.SelectableWhiteCard),card1.buttonsActive=!0}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}this.IsClient()?this.client.SendDataToServer(new InhumaneCards.Classes.Networking.ClientCardCancelNetDat):this.HostDataReceiver(new InhumaneCards.Classes.Networking.ClientCardCancelNetDat,0)}})}(this,cardText)),whiteCard.v.okayActive=!Bridge.referenceEquals(this.cardOne,cardText.v)&&!Bridge.referenceEquals(this.cardTwo,cardText.v),hideUnchecked&&whiteCard.v.okayActive&&(whiteCard.v.buttonsActive=!1),System.Array.add(this.cardsToDraw,whiteCard.v,InhumaneCards.Classes.DrawableCard)},SetupRandVotingMap:function(seed){var Rand=null,Swap=null,rand=new System.Random.$ctor1(seed),b,b1;for(this.randVotingMap=System.Array.init(new Uint8Array(this.playerCount),System.Byte),b=0;b<this.playerCount;b=b+1&255)this.randVotingMap[b]=b;for(Swap=Bridge.fn.bind(this,function(a,b1){var hold=this.randVotingMap[a];this.randVotingMap[a]=this.randVotingMap[b1];this.randVotingMap[b1]=hold}),Rand=Bridge.fn.bind(this,function(){for(var val=this.czarId;val===this.czarId;)val=InhumaneCards.Utils.B(rand.Next$1(this.playerCount));return val}),b1=0;b1<this.playerCount;b1=b1+1&255)b1!==this.czarId&&Swap(b1,Rand());Swap(this.czarId,this.playerCount-1|0)},StartVotingPhase:function(){if(this.roundWinnerId=255,this.votingPage=0,this.revealedCards=System.Array.init(new Int32Array(this.playerCount),System.Int32),this.UpdateScoreboard(),this.IsCzar()||(System.Array.remove(this.whiteCards,this.cardOne,System.String),System.Array.remove(this.whiteCards,this.cardTwo,System.String)),this.IsHost()){var seed=this.rng.Next();this.SetupRandVotingMap(seed);this.server.MulticastData(new InhumaneCards.Classes.Networking.StartVotingPhaseNetDat.$ctor1(this.playerCards,seed))}this.drawableBlackCard=new InhumaneCards.Classes.DrawableCard(InhumaneCards.Classes.DrawableCard.BLACK,InhumaneCards.MainPartOfGame.BLACK_CARD_X,InhumaneCards.MainPartOfGame.BLACK_CARD_Y,this.blackCardText,this.game.baseGame);this.SetupWhiteCardsVotingPhase(0);this.phase=InhumaneCards.PhaseEnum.VOTING},GetVotingPhasePages:function(){return this.blackCardTakesTwo?(Bridge.Int.div(this.playerCount-2|0,3)|0)+1|0:(Bridge.Int.div(this.playerCount-2|0,10)|0)+1|0},SetupWhiteCardsVotingPhase:function(page,everyoneRevealed){var startPlayerId,endId,i,startPlayerId1,endId1,i1,startPlayerId2,endId2,i2,j2,id2,whiteCardOne1,whiteCardTwo1,startPlayerId3,endId3,i3,j3,id3,whiteCard1;if(everyoneRevealed===void 0&&(everyoneRevealed=!1),this.votingPage=page,System.Array.clear(this.cardsToDraw,InhumaneCards.Classes.DrawableCard),everyoneRevealed)if(this.blackCardTakesTwo)for(startPlayerId2=Bridge.Int.mul(3,page),endId2=startPlayerId2+2|0,endId2>=(this.playerCount-1|0)&&(endId2=this.playerCount-2|0),i2=startPlayerId2;i2<=endId2;i2=i2+1|0)j2=i2-startPlayerId2|0,id2={v:this.randVotingMap[i2]},this.IsRoundWinnerDetermined()?this.roundWinnerId===id2.v?(whiteCardOne1=new InhumaneCards.Classes.WinnerWhiteCard(InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.mul(j2,2),320)|0,InhumaneCards.MainPartOfGame.WHITE_START_Y,this.playerCards[id2.v].cardOne,this.game.baseGame),whiteCardTwo1=new InhumaneCards.Classes.WinnerWhiteCard(InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.mul(j2,2),320)|0,740,this.playerCards[id2.v].cardTwo,this.game.baseGame)):(whiteCardOne1=new InhumaneCards.Classes.DrawableCard(InhumaneCards.Classes.DrawableCard.WHITE,InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.mul(j2,2),320)|0,InhumaneCards.MainPartOfGame.WHITE_START_Y,this.playerCards[id2.v].cardOne,this.game.baseGame),whiteCardTwo1=new InhumaneCards.Classes.DrawableCard(InhumaneCards.Classes.DrawableCard.WHITE,InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.mul(j2,2),320)|0,740,this.playerCards[id2.v].cardTwo,this.game.baseGame)):this.IsCzar()?(whiteCardOne1=new InhumaneCards.Classes.WinnableWhiteCard(InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.mul(j2,2),320)|0,InhumaneCards.MainPartOfGame.WHITE_START_Y,this.playerCards[id2.v].cardOne,this.game.baseGame).WithWinningListener(function($me,id2){return Bridge.fn.bind($me,function(){this.DetermineRoundWinner(id2.v)})}(this,id2)),whiteCardTwo1=new InhumaneCards.Classes.WinnableWhiteCard(InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.mul(j2,2),320)|0,740,this.playerCards[id2.v].cardTwo,this.game.baseGame).WithWinningListener(function($me,id2){return Bridge.fn.bind($me,function(){this.DetermineRoundWinner(id2.v)})}(this,id2))):(whiteCardOne1=new InhumaneCards.Classes.DrawableCard(InhumaneCards.Classes.DrawableCard.WHITE,InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.mul(j2,2),320)|0,InhumaneCards.MainPartOfGame.WHITE_START_Y,this.playerCards[id2.v].cardOne,this.game.baseGame),whiteCardTwo1=new InhumaneCards.Classes.DrawableCard(InhumaneCards.Classes.DrawableCard.WHITE,InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.mul(j2,2),320)|0,740,this.playerCards[id2.v].cardTwo,this.game.baseGame)),System.Array.add(this.cardsToDraw,whiteCardOne1,InhumaneCards.Classes.DrawableCard),System.Array.add(this.cardsToDraw,whiteCardTwo1,InhumaneCards.Classes.DrawableCard);else for(startPlayerId3=Bridge.Int.mul(10,page),endId3=startPlayerId3+9|0,endId3>=(this.playerCount-1|0)&&(endId3=this.playerCount-2|0),i3=startPlayerId3;i3<=endId3;i3=i3+1|0)j3=i3-startPlayerId3|0,id3={v:this.randVotingMap[i3]},whiteCard1=this.IsRoundWinnerDetermined()?this.roundWinnerId===id3.v?new InhumaneCards.Classes.WinnerWhiteCard(InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.div(j3,2)|0,320)|0,InhumaneCards.MainPartOfGame.WHITE_START_Y+Bridge.Int.mul(j3%2,310)|0,this.playerCards[id3.v].cardOne,this.game.baseGame):new InhumaneCards.Classes.DrawableCard(InhumaneCards.Classes.DrawableCard.WHITE,InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.div(j3,2)|0,320)|0,InhumaneCards.MainPartOfGame.WHITE_START_Y+Bridge.Int.mul(j3%2,310)|0,this.playerCards[id3.v].cardOne,this.game.baseGame):this.IsCzar()?new InhumaneCards.Classes.WinnableWhiteCard(InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.div(j3,2)|0,320)|0,InhumaneCards.MainPartOfGame.WHITE_START_Y+Bridge.Int.mul(j3%2,310)|0,this.playerCards[id3.v].cardOne,this.game.baseGame).WithWinningListener(function($me,id3){return Bridge.fn.bind($me,function(){this.DetermineRoundWinner(id3.v)})}(this,id3)):new InhumaneCards.Classes.DrawableCard(InhumaneCards.Classes.DrawableCard.WHITE,InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.div(j3,2)|0,320)|0,InhumaneCards.MainPartOfGame.WHITE_START_Y+Bridge.Int.mul(j3%2,310)|0,this.playerCards[id3.v].cardOne,this.game.baseGame),System.Array.add(this.cardsToDraw,whiteCard1,InhumaneCards.Classes.DrawableCard);else if(this.blackCardTakesTwo)for(startPlayerId=Bridge.Int.mul(3,page),endId=startPlayerId+2|0,endId>=(this.playerCount-1|0)&&(endId=this.playerCount-2|0),i=startPlayerId;i<=endId;i=i+1|0){var j=i-startPlayerId|0,id={v:this.randVotingMap[i]},whiteCardOne=new InhumaneCards.Classes.RevealableWhiteCard(InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.mul(j,2),320)|0,InhumaneCards.MainPartOfGame.WHITE_START_Y,this.playerCards[id.v].cardOne,this.IsCzar(),this.game.baseGame),whiteCardTwo=new InhumaneCards.Classes.RevealableWhiteCard(InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.mul(j,2),320)|0,740,this.playerCards[id.v].cardTwo,this.IsCzar(),this.game.baseGame);(this.revealedCards[id.v]&1)!=0&&whiteCardOne.Reveal();(this.revealedCards[id.v]&2)!=0&&whiteCardTwo.Reveal();whiteCardOne.WithRevealListener(function($me,id){return Bridge.fn.bind($me,function(){var $t;this.IsCzar()&&(this.revealedCards[$t=id.v]=this.revealedCards[$t]|1,this.IsHost()?this.server.MulticastData(new InhumaneCards.Classes.Networking.RevealCardNetDat.$ctor1(id.v,this.revealedCards[id.v])):this.client.SendDataToServer(new InhumaneCards.Classes.Networking.RevealCardNetDat.$ctor1(id.v,this.revealedCards[id.v])),this.CheckForRevealed()&&this.SetupWhiteCardsVotingPhase(page,!0))})}(this,id));whiteCardTwo.WithRevealListener(function($me,id){return Bridge.fn.bind($me,function(){var $t;this.IsCzar()&&(this.revealedCards[$t=id.v]=this.revealedCards[$t]|2,this.IsHost()?this.server.MulticastData(new InhumaneCards.Classes.Networking.RevealCardNetDat.$ctor1(id.v,this.revealedCards[id.v])):this.client.SendDataToServer(new InhumaneCards.Classes.Networking.RevealCardNetDat.$ctor1(id.v,this.revealedCards[id.v])),this.CheckForRevealed()&&this.SetupWhiteCardsVotingPhase(page,!0))})}(this,id));System.Array.add(this.cardsToDraw,whiteCardOne,InhumaneCards.Classes.DrawableCard);System.Array.add(this.cardsToDraw,whiteCardTwo,InhumaneCards.Classes.DrawableCard)}else for(startPlayerId1=Bridge.Int.mul(10,page),endId1=startPlayerId1+9|0,endId1>=(this.playerCount-1|0)&&(endId1=this.playerCount-2|0),i1=startPlayerId1;i1<=endId1;i1=i1+1|0){var j1=i1-startPlayerId1|0,id1={v:this.randVotingMap[i1]},whiteCard=new InhumaneCards.Classes.RevealableWhiteCard(InhumaneCards.MainPartOfGame.WHITE_START_X+Bridge.Int.mul(Bridge.Int.div(j1,2)|0,320)|0,InhumaneCards.MainPartOfGame.WHITE_START_Y+Bridge.Int.mul(j1%2,310)|0,this.playerCards[id1.v].cardOne,this.IsCzar(),this.game.baseGame);(this.revealedCards[id1.v]&1)!=0&&whiteCard.Reveal();whiteCard.WithRevealListener(function($me,id1){return Bridge.fn.bind($me,function(){var $t,$t1;this.IsCzar()&&(this.IsHost()?(this.revealedCards[$t=id1.v]=this.revealedCards[$t]|1,this.server.MulticastData(new InhumaneCards.Classes.Networking.RevealCardNetDat.$ctor1(id1.v,this.revealedCards[id1.v])),this.CheckForRevealed()&&this.SetupWhiteCardsVotingPhase(page,!0)):(this.revealedCards[$t1=id1.v]=this.revealedCards[$t1]|1,this.client.SendDataToServer(new InhumaneCards.Classes.Networking.RevealCardNetDat.$ctor1(id1.v,this.revealedCards[id1.v])),this.CheckForRevealed()&&this.SetupWhiteCardsVotingPhase(page,!0)))})}(this,id1));System.Array.add(this.cardsToDraw,whiteCard,InhumaneCards.Classes.DrawableCard)}},MakeWinnerText:function(playerName){this.roundWinnerText.text=(playerName||"")+" punktet";this.roundWinnerText.MeasureOriginToCenter();var winnerTextMeasured=Microsoft.Xna.Framework.Vector2.op_Multiply$1(InhumaneCards.Classes.FontNum.DejaVuSans.F().MeasureString(this.roundWinnerText.text),this.roundWinnerText.textSize),boxSize=Microsoft.Xna.Framework.Vector2.op_Addition(winnerTextMeasured.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(60,60)).ToPoint();this.roundWinnerBox=new Microsoft.Xna.Framework.Rectangle.$ctor1(Microsoft.Xna.Framework.Vector2.op_Subtraction(this.roundWinnerText.position.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(boxSize.X*.5,boxSize.Y*.5)).ToPoint(),boxSize.$clone())},DetermineRoundWinner:function(winnerId){this.IsRoundWinnerDetermined()||(this.roundWinnerId=winnerId,this.MakeWinnerText(this.game.GetPlayer(winnerId)),this.score[winnerId]=this.score[winnerId]+1&255,this.score[winnerId]===this.winningPoints&&(this.gameWinnerId=winnerId),this.UpdateScoreboard(),this.SetupWhiteCardsVotingPhase(this.votingPage,!0),this.IsCzar()&&(this.IsHost()?this.server.MulticastData(new InhumaneCards.Classes.Networking.RoundWinnerNetDat.$ctor1(winnerId)):this.client.SendDataToServer(new InhumaneCards.Classes.Networking.RoundWinnerNetDat.$ctor1(winnerId))),this.IsHost()&&(this.tickNextPhaseShouldStart=this.ticks.add(System.Int64(60))))},IsRoundWinnerDetermined:function(){return this.roundWinnerId!==255},DetermineGameWinner:function(){System.Array.clear(this.cardsToDraw,InhumaneCards.Classes.DrawableCard);this.IsHost()&&this.server.MulticastData(new InhumaneCards.Classes.Networking.GameWinnerNetDat.$ctor1(this.gameWinnerId));this.tickGameWinnerGotDetermined=this.ticks;this.gameWinnerText.text=(this.game.GetPlayer(this.gameWinnerId)||"")+" hat gewonnen!";this.gameWinnerText.MeasureOriginToCenter();this.phase=InhumaneCards.PhaseEnum.WINNER},IsGameWinnerKnown:function(){return this.gameWinnerId!==255},CheckForRevealed:function(){for(var everyoneRevealed=!0,compareFlag=this.blackCardTakesTwo?3:1,b=0;b<this.playerCount;b=b+1&255)if(b!==this.czarId&&this.revealedCards[b]!==compareFlag){everyoneRevealed=!1;break}return everyoneRevealed},ApplyRandomBlackCard:function(){for(var $t,$t1,oldBlackCard=this.blackCardText,randId;Bridge.referenceEquals(this.blackCardText,oldBlackCard);)randId=this.rng.Next$1(this.game.blackCards.length),this.blackCardText=($t=this.game.blackCards)[randId],this.blackCardTakesTwo=($t1=this.game.blackCardTakesTwo)[randId]},GetRandomWhiteCard:function(){var $t,randId=this.rng.Next$1(this.game.whiteCards.length);return($t=this.game.whiteCards)[randId]},Update:function(gameTime){this.IsClient()&&this.ticks.equals(System.Int64(5))&&this.client.SendDataToServer(new InhumaneCards.Classes.Networking.ClientReadyNetDat);this.IsHost()&&this.tickNextPhaseShouldStart.equals(this.ticks)&&(this.phase===InhumaneCards.PhaseEnum.SELECTING?this.playersWhoPicked===(this.playerCount-1|0)&&this.StartVotingPhase():this.phase===InhumaneCards.PhaseEnum.VOTING&&(this.IsGameWinnerKnown()?this.DetermineGameWinner():this.StartSelectingPhase()));this.IsGameWinnerKnown()&&this.tickGameWinnerGotDetermined.add(System.Int64(120)).equals(this.ticks)&&this.game.BackToMainMenu();this.ticks=this.ticks.inc();this.drawableBlackCard.Update();this.blankCardButton.Update();try{for(var i=0;i<System.Array.getCount(this.cardsToDraw,InhumaneCards.Classes.DrawableCard);i=i+1|0)System.Array.getItem(this.cardsToDraw,i,InhumaneCards.Classes.DrawableCard).Update()}catch($e1){$e1=System.Exception.create($e1)}this.phase===InhumaneCards.PhaseEnum.SELECTING&&this.playersWhoPicked===(this.playerCount-1|0)&&this.tickNextPhaseShouldStart.lt(this.ticks.sub(System.Int64(60)))&&(this.tickNextPhaseShouldStart=this.ticks.add(System.Int64(60)));this.IsCzar()&&this.phase===InhumaneCards.PhaseEnum.VOTING&&(this.votingPage<(this.GetVotingPhasePages()-1|0)&&this.nextPageButton.Update(),this.votingPage>0&&this.lastPageButton.Update())},Draw:function(gameTime){var plusHovered,i;this.game.baseGame.Draw$1(InhumaneCards.Classes.TexNum.PIXEL.T(),InhumaneCards.MainPartOfGame.BLACK_CARD_BOX.$clone(),InhumaneCards.MainPartOfGame.BLACK_BOX_COLOR.$clone());this.drawableBlackCard.Draw();this.game.baseGame.Draw$1(InhumaneCards.Classes.TexNum.PIXEL.T(),InhumaneCards.MainPartOfGame.BLANK_CARD_BOX.$clone(),InhumaneCards.Classes.DrawableCard.BLACK_COLOR.$clone());plusHovered=InhumaneCards.MainPartOfGame.BLANK_CARD_BOX.$clone().Contains(this.game.baseGame.GetMousePosition());this.game.baseGame.Draw$1(InhumaneCards.Classes.TexNum.CROSS.T(),InhumaneCards.MainPartOfGame.PLUS_BOX.$clone(),plusHovered?InhumaneCards.MainPartOfGame.PLUS_COLOR_HOVERED.$clone():InhumaneCards.MainPartOfGame.PLUS_COLOR.$clone());this.blankCardText.Draw();this.DrawScoreboard();this.phase===InhumaneCards.PhaseEnum.SELECTING&&this.playerId!==this.czarId&&System.Array.getCount(this.whiteCards,System.String)<InhumaneCards.MainPartOfGame.WHITE_CARD_COUNT?this.blankCardsWritten>=this.maxBlankCards?(this.allText.Draw(),this.consumedText.Draw()):this.cardsLeftText.Draw():(this.currentlyText.Draw(),this.notAvailableText.Draw());this.game.baseGame.Draw$6(InhumaneCards.Classes.TexNum.PIXEL.T(),InhumaneCards.MainPartOfGame.LINE_1_POS.$clone(),null,InhumaneCards.InhumaneGame.BOX_COLOR.$clone(),0,Microsoft.Xna.Framework.Vector2.Zero.$clone(),InhumaneCards.MainPartOfGame.HOR_LINE_SIZE.$clone(),Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0);this.game.baseGame.Draw$6(InhumaneCards.Classes.TexNum.PIXEL.T(),InhumaneCards.MainPartOfGame.LINE_2_POS.$clone(),null,InhumaneCards.InhumaneGame.BOX_COLOR.$clone(),0,Microsoft.Xna.Framework.Vector2.Zero.$clone(),InhumaneCards.MainPartOfGame.VER_LINE_SIZE.$clone(),Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0);try{for(i=0;i<System.Array.getCount(this.cardsToDraw,InhumaneCards.Classes.DrawableCard);i=i+1|0)System.Array.getItem(this.cardsToDraw,i,InhumaneCards.Classes.DrawableCard).Draw()}catch($e1){$e1=System.Exception.create($e1)}this.IsCzar()&&this.phase===InhumaneCards.PhaseEnum.SELECTING&&this.waitingForOtherPlayers.Draw();this.IsCzar()&&this.phase===InhumaneCards.PhaseEnum.VOTING&&(this.votingPage<(this.GetVotingPhasePages()-1|0)&&this.nextPageButton.Draw(),this.votingPage>0&&this.lastPageButton.Draw());this.phase===InhumaneCards.PhaseEnum.VOTING&&this.IsRoundWinnerDetermined()&&(this.game.baseGame.Draw$1(InhumaneCards.Classes.TexNum.PIXEL.T(),this.roundWinnerBox.$clone(),InhumaneCards.Classes.DrawableCard.BLACK_COLOR.$clone()),this.roundWinnerText.Draw());this.phase===InhumaneCards.PhaseEnum.WINNER&&this.gameWinnerText.Draw()},UpdateScoreboard:function(){var $t,b;for(System.Array.clear(this.scoreboardTexts,InhumaneCards.Classes.DrawableText),b=0;b<this.playerCount;b=b+1&255){var pos=new Microsoft.Xna.Framework.Vector2.$ctor2(InhumaneCards.MainPartOfGame.SCOREBOARD_START_X+Bridge.Int.mul(Bridge.Int.div(b,9)|0,340)|0,InhumaneCards.MainPartOfGame.BLACK_CARD_BOX.$clone().Location.Y+Bridge.Int.mul(b%9,38)|0),nameScoreString=(this.game.GetPlayer(b)||"")+": "+this.score[b],drawableText=($t=new InhumaneCards.Classes.DrawableText.$ctor1(nameScoreString,this.game.baseGame),$t.textSize=.6125,$t.position=pos.$clone(),$t);System.Array.add(this.scoreboardTexts,drawableText,InhumaneCards.Classes.DrawableText);b===this.czarId&&(this.czarBox=new Microsoft.Xna.Framework.Rectangle.$ctor1(Microsoft.Xna.Framework.Vector2.op_Subtraction(pos.$clone(),new Microsoft.Xna.Framework.Vector2.$ctor2(40,0)).ToPoint(),new Microsoft.Xna.Framework.Point.$ctor2(30,30)))}},DrawScoreboard:function(){for(var b=0;b<System.Array.getCount(this.scoreboardTexts,InhumaneCards.Classes.DrawableText);b=b+1&255)System.Array.getItem(this.scoreboardTexts,b,InhumaneCards.Classes.DrawableText).Draw();this.game.baseGame.Draw$1(InhumaneCards.Classes.TexNum.CZAR.T(),this.czarBox.$clone(),InhumaneCards.Classes.DrawableText.TEXT_COLOR.$clone())}}});Bridge.define("InhumaneCards.PhaseEnum",{$kind:"enum",statics:{fields:{WAITING:0,SELECTING:1,VOTING:2,WINNER:3}}});Bridge.define("InhumaneCards.Thread",{statics:{methods:{Sleep:function(a){}}},fields:{threadAction:null},ctors:{ctor:function(threadAction){this.$initialize();this.threadAction=threadAction}},methods:{Start:function(){new System.Threading.Tasks.Task(this.threadAction).start()}}});Bridge.define("InhumaneCards.Utils",{statics:{fields:{FLOAT_PI:0},ctors:{init:function(){this.FLOAT_PI=3.14159274}},methods:{Times$1:function(self,factor){return new Microsoft.Xna.Framework.Rectangle.$ctor1(InhumaneCards.Utils.Times(self.Location,factor),InhumaneCards.Utils.Times(self.Size,factor))},Times:function(self,factor){return new Microsoft.Xna.Framework.Point.$ctor2(Bridge.Int.clip32(self.X*factor),Bridge.Int.clip32(self.Y*factor))},SelfOffset:function(self,offsetVector){return self.Offset$3(offsetVector.X,offsetVector.Y),self.$clone()},B:function(self){return self&255}}}});Bridge.define("InhumaneWeb.WebApp",{main:function(){var canvas,styles,overlay,loadingText,resizedAction;InhumaneWeb.WebApp.GAME_CANVAS_X=(window.innerWidth>>>0)-5>>>0;InhumaneWeb.WebApp.GAME_CANVAS_Y=(window.innerHeight>>>0)-5>>>0;canvas=document.createElement("canvas");canvas.width=InhumaneWeb.WebApp.GAME_CANVAS_X;canvas.height=InhumaneWeb.WebApp.GAME_CANVAS_Y;canvas.id="monogamecanvas";styles=document.createElement("style");styles.innerHTML="\r\n#monogamecanvas {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0,0,0,0);\r\n  cursor: pointer;\r\n}\r\n#overlay {\r\n  position: fixed;\r\n  display: none;\r\n  width: 100%;\r\n  height: 100%;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0,0,0,0);\r\n  z-index: 2;\r\n  cursor: pointer;\r\n}\r\n#text{\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  font-size: 50px;\r\n  color: white;\r\n  transform: translate(-50%,-50%);\r\n  -ms-transform: translate(-50%,-50%);\r\n}";overlay=document.createElement("div");overlay.id="overlay";loadingText=document.createElement("div");loadingText.innerHTML="Loading...";loadingText.id="text";overlay.appendChild(loadingText);document.body.appendChild(styles);document.body.appendChild(canvas);document.body.appendChild(overlay);document.body.style.backgroundColor=System.String.format("rgb({0}, {1}, {2})",InhumaneCards.InhumaneGame.CLEAR_COLOR.$clone().R,InhumaneCards.InhumaneGame.CLEAR_COLOR.$clone().G,InhumaneCards.InhumaneGame.CLEAR_COLOR.$clone().B);overlay.style.display="block";resizedAction=function(eventStr){InhumaneWeb.WebApp.GAME_CANVAS_X=(window.innerWidth>>>0)-50>>>0;InhumaneWeb.WebApp.GAME_CANVAS_Y=(window.innerHeight>>>0)-50>>>0;canvas.width=InhumaneWeb.WebApp.GAME_CANVAS_X;canvas.height=InhumaneWeb.WebApp.GAME_CANVAS_Y;InhumaneWeb.WebApp.webGame.SetScreenSize(InhumaneWeb.WebApp.GAME_CANVAS_X,InhumaneWeb.WebApp.GAME_CANVAS_Y)};window.setTimeout(function(_){InhumaneWeb.WebApp.webGame=new InhumaneWeb.WebGame;InhumaneWeb.WebApp.webGame.Run();overlay.style.display="none"},10)},statics:{fields:{webGame:null,GAME_CANVAS_X:0,GAME_CANVAS_Y:0},methods:{PerformStringInput:function(question,defaultText,onDoneAction){window.setTimeout(function(_){onDoneAction(window.prompt(question,defaultText))},10)}}}});Bridge.define("System.Net.NetworkInformation.IPAddress",{statics:{fields:{Any:null}}});Bridge.define("System.Net.Sockets.NetworkStream",{inherits:[System.IDisposable],fields:{webSocket:null,newestMessage:null},props:{DataAvailable:{get:function(){return!0}}},alias:["Dispose","System$IDisposable$Dispose"],ctors:{ctor:function(webSocket){this.$initialize();this.webSocket=webSocket;webSocket.onmessage=Bridge.fn.bind(this,function(msg){this.newestMessage=System.Text.Encoding.UTF8.GetBytes$2(Bridge.cast(msg.data,System.String));System.Console.WriteLine(Bridge.cast(msg.data,System.String))});webSocket.onopen=function(_){}}},methods:{Write:function(bytes,b,c){var stringBytes=System.Text.Encoding.UTF8.GetString(bytes);this.webSocket.send(stringBytes)},ReadAsync:function(a,b,c){var $step=0,$task1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,newMesg,i,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3],$step);switch($step){case 0:if(this.newestMessage==null){$step=1;continue}$step=3;continue;case 1:$task1=System.Threading.Tasks.Task.delay(10);$step=2;$task1.continueWith($asyncBody);return;case 2:$task1.getAwaitedResult();$step=0;continue;case 3:for(newMesg=this.newestMessage,this.newestMessage=null,i=0;i<c;i=i+1|0)i<newMesg.length&&(a[i]=newMesg[i]);$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},Read:function(a,b,c){var newMesg=this.newestMessage;return this.newestMessage=null,newMesg},Close:function(){this.webSocket.close()},Dispose:function(){this.Close()}}});Bridge.define("System.Net.Sockets.TcpClient",{fields:{ReceiveTimeout:0,SendTimeout:0,Available:0,webSocket:null,stream:null},methods:{Close:function(){this.stream.Close()},Connect:function(ip,port){port=port+1|0;this.webSocket=new WebSocket(System.String.format("ws://{0}:{1}",ip,port));this.stream=new System.Net.Sockets.NetworkStream(this.webSocket)},GetStream:function(){return this.stream}}});Bridge.define("System.Net.Sockets.TcpListener",{ctors:{ctor:function(a,b){this.$initialize()}},methods:{Start:function(){},Stop:function(){},AcceptTcpClient:function(){return null},AcceptTcpClientAsync:function(){var $step=0,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0],$step);switch($step){case 0:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task}}});Bridge.define("System.Security.Cryptography.SHA1",{statics:{methods:{Create:function(){return null}}},methods:{ComputeHash:function(a){return null}}});Bridge.define("System.Xml.AttributeExtensions",{statics:{methods:{GetAttributeValue:function(TAttribute,TValue,type,valueSelector){var att=Bridge.as(System.Linq.Enumerable.from(Bridge.Reflection.getAttributes(type,TAttribute,!0)).firstOrDefault(null,null),TAttribute);return att!=null?valueSelector(att):Bridge.getDefaultValue(TValue)}}}});Bridge.define("System.Xml.Serialization.XmlQualifiedName",{statics:{fields:{Empty:null}}});Bridge.define("System.Xml.Serialization.XmlSerializer",{ctors:{ctor:function(a){this.$initialize()}},methods:{Serialize:function(writer,data,c){var parser=new DOMParser,xmlText=System.String.format('<Dat xmlns:p1="http://www.w3.org/2001/XMLSchema-instance"><\/Dat>',null),xmlDoc=parser.parseFromString(xmlText,"text/xml"),datElement=xmlDoc.getElementsByTagName("Dat")[0],dat,dat1,dat2,dat3,dat4,dat5,dat6,tmp;Bridge.is(data,InhumaneCards.Classes.Networking.JoinNetDat)?(dat=Bridge.cast(data,InhumaneCards.Classes.Networking.JoinNetDat),datElement.setAttribute("p1:type","A"),datElement.setAttribute("a",dat.username)):Bridge.is(data,InhumaneCards.Classes.Networking.PlayersNetDat)?(dat1=Bridge.cast(data,InhumaneCards.Classes.Networking.PlayersNetDat),datElement.setAttribute("p1:type","B")):Bridge.is(data,InhumaneCards.Classes.Networking.StartGameNetDat)?(dat2=Bridge.cast(data,InhumaneCards.Classes.Networking.StartGameNetDat),datElement.setAttribute("p1:type","C")):Bridge.is(data,InhumaneCards.Classes.Networking.ClientReadyNetDat)?datElement.setAttribute("p1:type","D"):Bridge.is(data,InhumaneCards.Classes.Networking.NewBlackCardNetDat)?datElement.setAttribute("p1:type","E"):Bridge.is(data,InhumaneCards.Classes.Networking.StartSelectingNetDat)?datElement.setAttribute("p1:type","F"):Bridge.is(data,InhumaneCards.Classes.Networking.RequestNewBlackCardNetDat)?datElement.setAttribute("p1:type","G"):Bridge.is(data,InhumaneCards.Classes.Networking.ClientCardNetDat)?(dat3=Bridge.cast(data,InhumaneCards.Classes.Networking.ClientCardNetDat),datElement.setAttribute("p1:type","H"),datElement.setAttribute("a",dat3.cardOne),datElement.setAttribute("b",dat3.cardTwo)):Bridge.is(data,InhumaneCards.Classes.Networking.StartVotingPhaseNetDat)?datElement.setAttribute("p1:type","I"):Bridge.is(data,InhumaneCards.Classes.Networking.ClientCardCancelNetDat)?datElement.setAttribute("p1:type","J"):Bridge.is(data,InhumaneCards.Classes.Networking.RevealCardNetDat)?(dat4=Bridge.cast(data,InhumaneCards.Classes.Networking.RevealCardNetDat),datElement.setAttribute("p1:type","K"),datElement.setAttribute("a",Bridge.toString(dat4.playerToReveal)),datElement.setAttribute("b",Bridge.toString(dat4.revealFlag))):Bridge.is(data,InhumaneCards.Classes.Networking.OpenPageNetDat)?(dat5=Bridge.cast(data,InhumaneCards.Classes.Networking.OpenPageNetDat),datElement.setAttribute("p1:type","L"),datElement.setAttribute("a",Bridge.toString(dat5.page))):Bridge.is(data,InhumaneCards.Classes.Networking.RoundWinnerNetDat)?(dat6=Bridge.cast(data,InhumaneCards.Classes.Networking.RoundWinnerNetDat),datElement.setAttribute("p1:type","M"),datElement.setAttribute("a",Bridge.toString(dat6.winnerId))):Bridge.is(data,InhumaneCards.Classes.Networking.GameWinnerNetDat)&&datElement.setAttribute("p1:type","N");tmp=xmlDoc.createElement("div");tmp.appendChild(datElement);writer.Write$10(tmp.innerHTML);writer.Close()},Deserialize:function(reader){var parser=new DOMParser,xmlText=reader.ReadToEnd(),dat,dat1,playerElements,i,dat2,playerElements1,i1,dat3,dat4,dat5,dat6,playerElements2,i2,dat7,dat8,dat9,dat10;System.Console.WriteLine(xmlText);var xmlDoc=parser.parseFromString(xmlText,"text/xml"),datElement=xmlDoc.getElementsByTagName("Dat")[0],type=datElement.getAttribute("p1:type");switch(type){case"A":return dat=new InhumaneCards.Classes.Networking.JoinNetDat.ctor,dat.username=datElement.getAttribute("a"),dat;case"B":for(dat1=new InhumaneCards.Classes.Networking.PlayersNetDat.ctor,dat1.playerCount=System.Byte.parse(datElement.getAttribute("b")),dat1.players=System.Array.init(dat1.playerCount,null,System.String),playerElements=datElement.getElementsByTagName("a")[0].getElementsByTagName("s"),i=0;i<dat1.playerCount;i=i+1|0)dat1.players[i]=playerElements[i].textContent;return dat1;case"C":for(dat2=new InhumaneCards.Classes.Networking.StartGameNetDat.ctor,dat2.playerCount=System.Byte.parse(datElement.getAttribute("b")),dat2.players=System.Array.init(dat2.playerCount,null,System.String),playerElements1=datElement.getElementsByTagName("a")[0].getElementsByTagName("s"),i1=0;i1<dat2.playerCount;i1=i1+1|0)dat2.players[i1]=playerElements1[i1].textContent;return dat2.maxBlankCards=System.Byte.parse(datElement.getAttribute("c")),dat2;case"D":return new InhumaneCards.Classes.Networking.ClientReadyNetDat;case"E":return dat3=new InhumaneCards.Classes.Networking.NewBlackCardNetDat.ctor,dat3.cardText=datElement.getAttribute("a"),dat3.takesTwo=System.Boolean.parse(datElement.getAttribute("b")),dat3;case"F":return dat4=new InhumaneCards.Classes.Networking.StartSelectingNetDat.ctor,dat4.cardText=datElement.getAttribute("a"),dat4.takesTwo=System.Boolean.parse(datElement.getAttribute("b")),dat4.czarId=System.Byte.parse(datElement.getAttribute("c")),dat4;case"G":return new InhumaneCards.Classes.Networking.RequestNewBlackCardNetDat;case"H":return dat5=new InhumaneCards.Classes.Networking.ClientCardNetDat.ctor,dat5.cardOne=datElement.getAttribute("a"),dat5.cardTwo=datElement.getAttribute("b"),dat5;case"I":for(dat6=new InhumaneCards.Classes.Networking.StartVotingPhaseNetDat.ctor,dat6.randSeed=System.Int32.parse(datElement.getAttribute("b")),playerElements2=datElement.getElementsByTagName("a")[0].getElementsByTagName("p"),dat6.playerCards=System.Array.init(InhumaneWeb.WebApp.webGame.childGame.GetPlayerCount(),null,InhumaneCards.Classes.Networking.PlayerCards),System.Console.WriteLine("Players: "+dat6.playerCards.length),i2=0;i2<dat6.playerCards.length;i2=i2+1|0)dat6.playerCards[i2]=Bridge.referenceEquals(playerElements2[i2].getAttribute("p1:nil"),"true")?null:new InhumaneCards.Classes.Networking.PlayerCards.$ctor1(playerElements2[i2].getAttribute("a"),playerElements2[i2].getAttribute("b"));return dat6;case"J":return new InhumaneCards.Classes.Networking.ClientCardCancelNetDat;case"K":return dat7=new InhumaneCards.Classes.Networking.RevealCardNetDat.ctor,dat7.playerToReveal=System.Byte.parse(datElement.getAttribute("a")),dat7.revealFlag=System.Int32.parse(datElement.getAttribute("b")),dat7;case"L":return dat8=new InhumaneCards.Classes.Networking.OpenPageNetDat.ctor,dat8.page=System.Byte.parse(datElement.getAttribute("a")),dat8;case"M":return dat9=new InhumaneCards.Classes.Networking.RoundWinnerNetDat.ctor,dat9.winnerId=System.Byte.parse(datElement.getAttribute("a")),dat9;case"N":return dat10=new InhumaneCards.Classes.Networking.GameWinnerNetDat.ctor,dat10.winnerId=System.Byte.parse(datElement.getAttribute("a")),dat10}return new InhumaneCards.Classes.Networking.NetworkingData}}});Bridge.define("System.Xml.Serialization.XmlSerializerNamespaces",{ctors:{ctor:function(a){this.$initialize()}}});Bridge.define("System.Xml.Serialization.XmlWriter",{statics:{methods:{Create:function(a,b){return a}}}});Bridge.define("System.Xml.Serialization.XmlWriterSettings",{fields:{Indent:!1,OmitXmlDeclaration:!1},ctors:{ctor:function(){this.$initialize()}}});Bridge.define("System.Xml.XmlArray",{inherits:[System.Attribute],ctors:{ctor:function(a){this.$initialize();System.Attribute.ctor.call(this)}}});Bridge.define("System.Xml.XmlArrayItem",{inherits:[System.Attribute],ctors:{ctor:function(a){this.$initialize();System.Attribute.ctor.call(this)}}});Bridge.define("System.Xml.XmlAttribute",{inherits:[System.Attribute],ctors:{ctor:function(a){this.$initialize();System.Attribute.ctor.call(this)}}});Bridge.define("System.Xml.XmlIncludeAttribute",{inherits:[System.Attribute],ctors:{ctor:function(type){this.$initialize();System.Attribute.ctor.call(this)}}});Bridge.define("System.Xml.XmlRoot",{inherits:[System.Attribute],fields:{namespace:null},ctors:{ctor:function(a){this.$initialize();System.Attribute.ctor.call(this)}}});Bridge.define("System.Xml.XmlType",{inherits:[System.Attribute],fields:{xmlName:null},ctors:{ctor:function(xmlName){this.$initialize();System.Attribute.ctor.call(this);this.xmlName=xmlName}}});Bridge.define("InhumaneCards.Classes.CrossableCard",{inherits:[InhumaneCards.Classes.DrawableCard],statics:{fields:{CROSS_BOX:0,CROSS_MARGIN:0,CROSS_TEXTURE:null,CROSS_ORIGIN:null,CROSS_COLOR:null,CROSS_COLOR_HOVERED:null},ctors:{init:function(){this.CROSS_ORIGIN=new Microsoft.Xna.Framework.Vector2;this.CROSS_COLOR=new Microsoft.Xna.Framework.Color;this.CROSS_COLOR_HOVERED=new Microsoft.Xna.Framework.Color;this.CROSS_BOX=50;this.CROSS_MARGIN=5;this.CROSS_TEXTURE=InhumaneCards.Classes.TexNum.CROSS.T();this.CROSS_ORIGIN=new Microsoft.Xna.Framework.Vector2.$ctor2(InhumaneCards.Classes.CrossableCard.CROSS_TEXTURE.Width/2,InhumaneCards.Classes.CrossableCard.CROSS_TEXTURE.Height/2);this.CROSS_COLOR=Microsoft.Xna.Framework.Color.op_Multiply(Microsoft.Xna.Framework.Color.White.$clone(),.2);this.CROSS_COLOR_HOVERED=Microsoft.Xna.Framework.Color.op_Multiply(Microsoft.Xna.Framework.Color.White.$clone(),.25)}}},fields:{crossClicked:null,crossDestination:null,crossPosition:null,crossScale:0,hovered:!1},ctors:{init:function(){this.crossDestination=new Microsoft.Xna.Framework.Rectangle;this.crossPosition=new Microsoft.Xna.Framework.Vector2;this.crossClicked=function(){};this.hovered=!1},ctor:function(color,posX,posY,text,game){this.$initialize();InhumaneCards.Classes.DrawableCard.ctor.call(this,color,posX,posY,text,game);this.crossDestination=new Microsoft.Xna.Framework.Rectangle.$ctor2(((posX+this.destination.Width|0)-InhumaneCards.Classes.CrossableCard.CROSS_BOX|0)-InhumaneCards.Classes.CrossableCard.CROSS_MARGIN|0,((posY+this.destination.Height|0)-InhumaneCards.Classes.CrossableCard.CROSS_BOX|0)-InhumaneCards.Classes.CrossableCard.CROSS_MARGIN|0,InhumaneCards.Classes.CrossableCard.CROSS_BOX,InhumaneCards.Classes.CrossableCard.CROSS_BOX);this.crossPosition=this.crossDestination.Center.ToVector2();this.crossScale=50/InhumaneCards.Classes.CrossableCard.CROSS_TEXTURE.Width}},methods:{WithCrossListener:function(crossClicked){return this.crossClicked=crossClicked,this},Update:function(){this.hovered=this.crossDestination.Contains(this.game.GetMousePosition());this.hovered&&this.game.GotMouseReleased()&&this.crossClicked()},Draw:function(){InhumaneCards.Classes.DrawableCard.prototype.Draw.call(this);this.game.Draw$7(InhumaneCards.Classes.TexNum.CROSS.T(),this.crossPosition.$clone(),null,this.hovered?InhumaneCards.Classes.CrossableCard.CROSS_COLOR_HOVERED.$clone():InhumaneCards.Classes.CrossableCard.CROSS_COLOR.$clone(),.7853982,InhumaneCards.Classes.CrossableCard.CROSS_ORIGIN.$clone(),this.crossScale,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0)}}});Bridge.define("InhumaneCards.Classes.Networking.ClientCardCancelNetDat",{inherits:[InhumaneCards.Classes.Networking.NetworkingData],ctors:{ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this)}}});Bridge.define("InhumaneCards.Classes.Networking.ClientCardNetDat",{inherits:[InhumaneCards.Classes.Networking.NetworkingData],fields:{cardOne:null,cardTwo:null},ctors:{ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this)},$ctor1:function(cardOne){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this);this.cardOne=cardOne},$ctor2:function(cardOne,cardTwo){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this);this.cardOne=cardOne;this.cardTwo=cardTwo}}});Bridge.define("InhumaneCards.Classes.Networking.ClientReadyNetDat",{inherits:[InhumaneCards.Classes.Networking.NetworkingData],ctors:{ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this)}}});Bridge.define("InhumaneCards.Classes.Networking.GameWinnerNetDat",{inherits:[InhumaneCards.Classes.Networking.NetworkingData],fields:{winnerId:0},ctors:{ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this)},$ctor1:function(winnerId){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this);this.winnerId=winnerId}}});Bridge.define("InhumaneCards.Classes.Networking.JoinNetDat",{inherits:[InhumaneCards.Classes.Networking.NetworkingData],fields:{username:null},ctors:{ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this)},$ctor1:function(username){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this);this.username=username}}});Bridge.define("InhumaneCards.Classes.Networking.NewBlackCardNetDat",{inherits:[InhumaneCards.Classes.Networking.NetworkingData],fields:{cardText:null,takesTwo:!1},ctors:{$ctor1:function(cardText,takesTwo){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this);this.cardText=cardText;this.takesTwo=takesTwo},ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this)}}});Bridge.define("InhumaneCards.Classes.Networking.OpenPageNetDat",{inherits:[InhumaneCards.Classes.Networking.NetworkingData],fields:{page:0},ctors:{ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this)},$ctor1:function(page){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this);this.page=page}}});Bridge.define("InhumaneCards.Classes.Networking.PlayersNetDat",{inherits:[InhumaneCards.Classes.Networking.NetworkingData],fields:{players:null,playerCount:0},ctors:{$ctor1:function(players,playerCount){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this);this.players=players;this.playerCount=playerCount},ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this)}}});Bridge.define("InhumaneCards.Classes.Networking.RequestNewBlackCardNetDat",{inherits:[InhumaneCards.Classes.Networking.NetworkingData],ctors:{ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this)}}});Bridge.define("InhumaneCards.Classes.Networking.RevealCardNetDat",{inherits:[InhumaneCards.Classes.Networking.NetworkingData],fields:{playerToReveal:0,revealFlag:0},ctors:{ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this)},$ctor1:function(playerToReveal,revealFlag){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this);this.playerToReveal=playerToReveal;this.revealFlag=revealFlag}}});Bridge.define("InhumaneCards.Classes.Networking.RoundWinnerNetDat",{inherits:[InhumaneCards.Classes.Networking.NetworkingData],fields:{winnerId:0},ctors:{ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this)},$ctor1:function(winnerId){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this);this.winnerId=winnerId}}});Bridge.define("InhumaneCards.Classes.Networking.StartVotingPhaseNetDat",{inherits:[InhumaneCards.Classes.Networking.NetworkingData],fields:{playerCards:null,randSeed:0},ctors:{ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this)},$ctor1:function(playerCards,randSeed){this.$initialize();InhumaneCards.Classes.Networking.NetworkingData.ctor.call(this);this.playerCards=playerCards;this.randSeed=randSeed}}});Bridge.define("InhumaneCards.Classes.RevealableWhiteCard",{inherits:[InhumaneCards.Classes.DrawableCard],statics:{fields:{BUTTON_RIGHT_OFFSET:0,BUTTON_LEFT_OFFSET:0,BUTTON_HEIGHT:0,BUTTON_BOT_OFFSET:0},ctors:{init:function(){this.BUTTON_RIGHT_OFFSET=0;this.BUTTON_LEFT_OFFSET=0;this.BUTTON_HEIGHT=60;this.BUTTON_BOT_OFFSET=0}}},fields:{revealClicked:null,revealed:!1,revealableByPlayer:!1,revealButton:null,realLines:null},ctors:{init:function(){this.revealClicked=function(){};this.revealed=!1;this.revealableByPlayer=!1},ctor:function(posX,posY,text,revealableByPlayer,game){for(this.$initialize(),InhumaneCards.Classes.DrawableCard.ctor.call(this,InhumaneCards.Classes.DrawableCard.WHITE,posX,posY,"???",game),this.revealableByPlayer=revealableByPlayer,revealableByPlayer&&(this.revealButton=new InhumaneCards.Classes.Button.ctor("Enthüllen",new Microsoft.Xna.Framework.Rectangle.$ctor2(posX+InhumaneCards.Classes.RevealableWhiteCard.BUTTON_LEFT_OFFSET|0,((posY+InhumaneCards.Classes.DrawableCard.CARD_HEIGHT|0)-InhumaneCards.Classes.RevealableWhiteCard.BUTTON_HEIGHT|0)-InhumaneCards.Classes.RevealableWhiteCard.BUTTON_BOT_OFFSET|0,310,InhumaneCards.Classes.RevealableWhiteCard.BUTTON_HEIGHT),game,Bridge.fn.cacheBind(this,this.RevealActionWrapper)));this.lines.Count>6;)this.lines.removeAt(this.lines.Count-1|0);this.realLines=text}},methods:{WithRevealListener:function(revealClicked){return this.revealClicked=revealClicked,this},Reveal:function(){this.UpdateText(this.realLines);this.revealed=!0;this.realLines=null},RevealActionWrapper:function(){this.Reveal();this.revealClicked()},Draw:function(){InhumaneCards.Classes.DrawableCard.prototype.Draw.call(this);!this.revealed&&this.revealableByPlayer&&this.revealButton.Draw()},Update:function(){InhumaneCards.Classes.DrawableCard.prototype.Update.call(this);!this.revealed&&this.revealableByPlayer&&this.revealButton.Update()}}});Bridge.define("InhumaneCards.Classes.WinnableWhiteCard",{inherits:[InhumaneCards.Classes.DrawableCard],statics:{fields:{BUTTON_RIGHT_OFFSET:0,BUTTON_LEFT_OFFSET:0,BUTTON_HEIGHT:0,BUTTON_BOT_OFFSET:0},ctors:{init:function(){this.BUTTON_RIGHT_OFFSET=0;this.BUTTON_LEFT_OFFSET=0;this.BUTTON_HEIGHT=60;this.BUTTON_BOT_OFFSET=0}}},fields:{winningAction:null,winnerButton:null},ctors:{init:function(){this.winningAction=function(){}},ctor:function(posX,posY,text,game){for(this.$initialize(),InhumaneCards.Classes.DrawableCard.ctor.call(this,InhumaneCards.Classes.DrawableCard.WHITE,posX,posY,text,game),this.winnerButton=new InhumaneCards.Classes.Button.ctor("Gewinner",new Microsoft.Xna.Framework.Rectangle.$ctor2(posX+InhumaneCards.Classes.WinnableWhiteCard.BUTTON_LEFT_OFFSET|0,((posY+InhumaneCards.Classes.DrawableCard.CARD_HEIGHT|0)-InhumaneCards.Classes.WinnableWhiteCard.BUTTON_HEIGHT|0)-InhumaneCards.Classes.WinnableWhiteCard.BUTTON_BOT_OFFSET|0,310,InhumaneCards.Classes.WinnableWhiteCard.BUTTON_HEIGHT),game,Bridge.fn.cacheBind(this,this.WinningActionWrapper));this.lines.Count>6;)this.lines.removeAt(this.lines.Count-1|0)}},methods:{WithWinningListener:function(winningAction){return this.winningAction=winningAction,this},WinningActionWrapper:function(){this.winningAction()},Draw:function(){InhumaneCards.Classes.DrawableCard.prototype.Draw.call(this);this.winnerButton.Draw()},Update:function(){InhumaneCards.Classes.DrawableCard.prototype.Update.call(this);this.winnerButton.Update()}}});Bridge.define("InhumaneCards.Classes.WinnerWhiteCard",{inherits:[InhumaneCards.Classes.DrawableCard],statics:{fields:{TEXT_BOTTOM_OFFSET:0,WINNER_TEXT_SIZE:0,WINNER_TEXT_OFFSET:0},ctors:{init:function(){this.TEXT_BOTTOM_OFFSET=30;this.WINNER_TEXT_SIZE=.8;this.WINNER_TEXT_OFFSET=6}}},fields:{winnerText:null},ctors:{ctor:function(posX,posY,text,game){var $t;for(this.$initialize(),InhumaneCards.Classes.DrawableCard.ctor.call(this,InhumaneCards.Classes.DrawableCard.WHITE,posX,posY,text,game),this.winnerText=($t=new InhumaneCards.Classes.DrawableText.$ctor1("Gewinner",game),$t.position=new Microsoft.Xna.Framework.Vector2.$ctor2(posX+155|0,((posY+InhumaneCards.Classes.DrawableCard.CARD_HEIGHT|0)-InhumaneCards.Classes.WinnerWhiteCard.TEXT_BOTTOM_OFFSET|0)+InhumaneCards.Classes.WinnerWhiteCard.WINNER_TEXT_OFFSET|0),$t.textSize=InhumaneCards.Classes.WinnerWhiteCard.WINNER_TEXT_SIZE,$t).MeasureOriginToCenter();this.lines.Count>6;)this.lines.removeAt(this.lines.Count-1|0)}},methods:{Draw:function(){InhumaneCards.Classes.DrawableCard.prototype.Draw.call(this);this.winnerText.Draw()}}});Bridge.define("InhumaneWeb.WebGame",{inherits:[InhumaneCards.BaseGame],fields:{graphics:null,spriteBatch:null,childGame:null,screenSize:0,screenOffset:null,mouseLastTick:!1,mouseThisTick:!1,mousePosition:null,otherTextInputOpen:!1},ctors:{init:function(){this.screenOffset=new Microsoft.Xna.Framework.Vector2;this.mousePosition=new Microsoft.Xna.Framework.Point;this.screenSize=1;this.screenOffset=Microsoft.Xna.Framework.Vector2.Zero.$clone();this.mouseLastTick=!1;this.mouseThisTick=!1;this.mousePosition=Microsoft.Xna.Framework.Point.Zero.$clone();this.otherTextInputOpen=!1},ctor:function(){this.$initialize();InhumaneCards.BaseGame.ctor.call(this);this.graphics=new Microsoft.Xna.Framework.GraphicsDeviceManager(this);this.Content.RootDirectory="Content";this.childGame=new InhumaneCards.InhumaneGame(this);this.IsMouseVisible=!0;this.TargetElapsedTime=System.TimeSpan.fromSeconds(.033333333333333333)}},methods:{SetScreenSize:function(width,height){var sizeX=width/1920,sizeY=height/1080;this.screenSize=sizeX<sizeY?sizeX:sizeY},Initialize:function(){this.SetScreenSize(InhumaneWeb.WebApp.GAME_CANVAS_X,InhumaneWeb.WebApp.GAME_CANVAS_Y);this.childGame.Init();this.Window.Title="Inhumane Cards for Web";InhumaneCards.BaseGame.prototype.Initialize.call(this)},LoadContent:function(){this.spriteBatch=new Microsoft.Xna.Framework.Graphics.SpriteBatch(this.GraphicsDevice);this.childGame.LoadContent()},UnloadContent:function(){},Update:function(gameTime){this.mouseThisTick=Microsoft.Xna.Framework.Input.Mouse.GetState().LeftButton===Microsoft.Xna.Framework.Input.ButtonState.Pressed;this.mousePosition=InhumaneCards.Utils.Times(Microsoft.Xna.Framework.Input.Mouse.GetState().Position,1/this.screenSize);this.childGame.Update(gameTime);InhumaneCards.BaseGame.prototype.Update.call(this,gameTime);this.mouseLastTick=this.mouseThisTick},Draw:function(gameTime){this.BatchBegin();this.childGame.Draw(gameTime);this.BatchEnd();InhumaneCards.BaseGame.prototype.Draw.call(this,gameTime)},Draw$1:function(texture,destinationRectangle,color){this.spriteBatch.Draw(texture,InhumaneCards.Utils.SelfOffset(InhumaneCards.Utils.Times$1(destinationRectangle,this.screenSize),this.screenOffset.$clone()),color.$clone())},Draw$4:function(texture,position,color){this.spriteBatch.Draw$6(texture,Microsoft.Xna.Framework.Vector2.op_Addition(Microsoft.Xna.Framework.Vector2.op_Multiply$1(position.$clone(),this.screenSize),this.screenOffset.$clone()),null,color.$clone(),0,Microsoft.Xna.Framework.Vector2.Zero.$clone(),this.screenSize,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0)},Draw$5:function(texture,position,sourceRectangle,color){this.spriteBatch.Draw$6(texture,Microsoft.Xna.Framework.Vector2.op_Addition(Microsoft.Xna.Framework.Vector2.op_Multiply$1(position.$clone(),this.screenSize),this.screenOffset.$clone()),System.Nullable.lift1("$clone",sourceRectangle),color.$clone(),0,Microsoft.Xna.Framework.Vector2.Zero.$clone(),this.screenSize,Microsoft.Xna.Framework.Graphics.SpriteEffects.None,0)},Draw$3:function(texture,destinationRectangle,sourceRectangle,color,rotation,origin,effects,layerDepth){this.spriteBatch.Draw$2(texture,InhumaneCards.Utils.SelfOffset(InhumaneCards.Utils.Times$1(destinationRectangle,this.screenSize),this.screenOffset.$clone()),System.Nullable.lift1("$clone",sourceRectangle),color.$clone(),rotation,origin.$clone(),effects,layerDepth)},Draw$2:function(texture,destinationRectangle,sourceRectangle,color){this.spriteBatch.Draw$1(texture,InhumaneCards.Utils.SelfOffset(InhumaneCards.Utils.Times$1(destinationRectangle,this.screenSize),this.screenOffset.$clone()),System.Nullable.lift1("$clone",sourceRectangle),color.$clone())},Draw$6:function(texture,position,sourceRectangle,color,rotation,origin,scale,effects,layerDepth){this.spriteBatch.Draw$5(texture,Microsoft.Xna.Framework.Vector2.op_Addition(Microsoft.Xna.Framework.Vector2.op_Multiply$1(position.$clone(),this.screenSize),this.screenOffset.$clone()),System.Nullable.lift1("$clone",sourceRectangle),color.$clone(),rotation,origin.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(scale.$clone(),this.screenSize),effects,layerDepth)},Draw$7:function(texture,position,sourceRectangle,color,rotation,origin,scale,effects,layerDepth){this.spriteBatch.Draw$6(texture,Microsoft.Xna.Framework.Vector2.op_Addition(Microsoft.Xna.Framework.Vector2.op_Multiply$1(position.$clone(),this.screenSize),this.screenOffset.$clone()),System.Nullable.lift1("$clone",sourceRectangle),color.$clone(),rotation,origin.$clone(),scale*this.screenSize,effects,layerDepth)},GetGraphics:function(){return this.graphics},GetSpriteBatch:function(){return this.spriteBatch},DrawString$4:function(spriteFont,text,position,color,rotation,origin,scale,effects,layerDepth){this.spriteBatch.DrawString$4(spriteFont,text,Microsoft.Xna.Framework.Vector2.op_Addition(Microsoft.Xna.Framework.Vector2.op_Multiply$1(position.$clone(),this.screenSize),this.screenOffset.$clone()),color.$clone(),rotation,origin.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(scale.$clone(),this.screenSize),effects,layerDepth)},DrawString:function(spriteFont,text,position,color){this.spriteBatch.DrawString(spriteFont,text,Microsoft.Xna.Framework.Vector2.op_Addition(Microsoft.Xna.Framework.Vector2.op_Multiply$1(position.$clone(),this.screenSize),this.screenOffset.$clone()),color.$clone())},DrawString$2:function(spriteFont,text,position,color,rotation,origin,scale,effects,layerDepth){this.spriteBatch.DrawString$2(spriteFont,text,Microsoft.Xna.Framework.Vector2.op_Addition(Microsoft.Xna.Framework.Vector2.op_Multiply$1(position.$clone(),this.screenSize),this.screenOffset.$clone()),color.$clone(),rotation,origin.$clone(),scale*this.screenSize,effects,layerDepth)},DrawString$1:function(spriteFont,text,position,color,rotation,origin,scale,effects,layerDepth){this.spriteBatch.DrawString$1(spriteFont,text,Microsoft.Xna.Framework.Vector2.op_Addition(Microsoft.Xna.Framework.Vector2.op_Multiply$1(position.$clone(),this.screenSize),this.screenOffset.$clone()),color.$clone(),rotation,origin.$clone(),Microsoft.Xna.Framework.Vector2.op_Multiply$1(scale.$clone(),this.screenSize),effects,layerDepth)},DrawString$3:function(spriteFont,text,position,color){this.spriteBatch.DrawString$3(spriteFont,text,Microsoft.Xna.Framework.Vector2.op_Addition(Microsoft.Xna.Framework.Vector2.op_Multiply$1(position.$clone(),this.screenSize),this.screenOffset.$clone()),color.$clone())},DrawString$5:function(spriteFont,text,position,color,rotation,origin,scale,effects,layerDepth){this.spriteBatch.DrawString$5(spriteFont,text,Microsoft.Xna.Framework.Vector2.op_Addition(Microsoft.Xna.Framework.Vector2.op_Multiply$1(position.$clone(),this.screenSize),this.screenOffset.$clone()),color.$clone(),rotation,origin.$clone(),scale*this.screenSize,effects,layerDepth)},GotMouseReleased:function(){return this.mouseLastTick&&!this.mouseThisTick},GotMousePressed:function(){return!this.mouseLastTick&&this.mouseThisTick},IsMouseDown:function(){return this.mouseThisTick},GetMousePosition:function(){return this.mousePosition.$clone()},PerformTextInput:function(question,defaultText,onDoneAction){this.otherTextInputOpen||(this.otherTextInputOpen=!0,InhumaneWeb.WebApp.PerformStringInput(question,defaultText,Bridge.fn.bind(this,function(text){text!=null&&text.length>0&&onDoneAction(text);this.otherTextInputOpen=!1})))},CanHostGames:function(){return!1}}});Bridge.define("InhumaneCards.Classes.Networking.StartGameNetDat",{inherits:[InhumaneCards.Classes.Networking.PlayersNetDat],fields:{maxBlankCards:0},ctors:{$ctor1:function(maxBlankCards,players,playerCount){this.$initialize();InhumaneCards.Classes.Networking.PlayersNetDat.$ctor1.call(this,players,playerCount);this.maxBlankCards=maxBlankCards},ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.PlayersNetDat.ctor.call(this)}}});Bridge.define("InhumaneCards.Classes.Networking.StartSelectingNetDat",{inherits:[InhumaneCards.Classes.Networking.NewBlackCardNetDat],fields:{czarId:0},ctors:{$ctor1:function(czarId,cardText,takesTwo){this.$initialize();InhumaneCards.Classes.Networking.NewBlackCardNetDat.$ctor1.call(this,cardText,takesTwo);this.czarId=czarId},ctor:function(){this.$initialize();InhumaneCards.Classes.Networking.NewBlackCardNetDat.ctor.call(this)}}});Bridge.define("InhumaneCards.Classes.SelectableWhiteCard",{inherits:[InhumaneCards.Classes.CrossableCard],statics:{fields:{BUTTON_RIGHT_OFFSET:0,BUTTON_LEFT_OFFSET:0,BUTTON_HEIGHT:0,BUTTON_BOT_OFFSET:0},ctors:{init:function(){this.BUTTON_RIGHT_OFFSET=60;this.BUTTON_LEFT_OFFSET=0;this.BUTTON_HEIGHT=60;this.BUTTON_BOT_OFFSET=0}}},fields:{okayClicked:null,cancelClicked:null,okayButton:null,cancelButton:null,okayActive:!1,buttonsActive:!1},ctors:{init:function(){this.okayClicked=function(){};this.cancelClicked=function(){};this.okayActive=!0;this.buttonsActive=!0},ctor:function(posX,posY,text,game){for(this.$initialize(),InhumaneCards.Classes.CrossableCard.ctor.call(this,InhumaneCards.Classes.DrawableCard.WHITE,posX,posY,text,game),this.okayButton=new InhumaneCards.Classes.Button.ctor("Spielen",new Microsoft.Xna.Framework.Rectangle.$ctor2(posX+InhumaneCards.Classes.SelectableWhiteCard.BUTTON_LEFT_OFFSET|0,((posY+InhumaneCards.Classes.DrawableCard.CARD_HEIGHT|0)-InhumaneCards.Classes.SelectableWhiteCard.BUTTON_HEIGHT|0)-InhumaneCards.Classes.SelectableWhiteCard.BUTTON_BOT_OFFSET|0,250,InhumaneCards.Classes.SelectableWhiteCard.BUTTON_HEIGHT),game,Bridge.fn.cacheBind(this,this.OkayActionWrapper)),this.cancelButton=new InhumaneCards.Classes.Button.ctor("Zurück",new Microsoft.Xna.Framework.Rectangle.$ctor2(posX+InhumaneCards.Classes.SelectableWhiteCard.BUTTON_LEFT_OFFSET|0,((posY+InhumaneCards.Classes.DrawableCard.CARD_HEIGHT|0)-InhumaneCards.Classes.SelectableWhiteCard.BUTTON_HEIGHT|0)-InhumaneCards.Classes.SelectableWhiteCard.BUTTON_BOT_OFFSET|0,250,InhumaneCards.Classes.SelectableWhiteCard.BUTTON_HEIGHT),game,Bridge.fn.cacheBind(this,this.CancelActionWrapper));this.lines.Count>6;)this.lines.removeAt(this.lines.Count-1|0)}},methods:{WithOkayListener:function(okayClicked){return this.okayClicked=okayClicked,this},WithCancelListener:function(cancelClicked){return this.cancelClicked=cancelClicked,this},OkayActionWrapper:function(){this.okayActive=!1;this.okayClicked()},CancelActionWrapper:function(){this.okayActive=!0;this.cancelClicked()},Draw:function(){InhumaneCards.Classes.CrossableCard.prototype.Draw.call(this);this.buttonsActive&&(this.okayActive?this.okayButton.Draw():this.cancelButton.Draw())},Update:function(){InhumaneCards.Classes.CrossableCard.prototype.Update.call(this);this.buttonsActive&&(this.okayActive?this.okayButton.Update():this.cancelButton.Update())}}})});